/*!--
Author: Sudhakara Rao Kilaparthi
email: sudhakar@kavayahsolutions.com
URL: http://www.kavayahsolutions.com
--*/
define(["jquery","ksPopup","JSZip","JSZipUtils","ksUtility","mage/validation"],function(e,a,t,o,s){"use strict";return function(r){var i=i||{pSKU:null,pData:null,pType:null,maxLimitedSamplesPerDay:1e4,ulProductDetails:null,waterquestionmarkimage:"/pub/s7sdk/3.4/images/sdk/questionmark.png",busyImage:"/pub/s7sdk/3.4/images/sdk/busyicon.gif",init:function(a){this.setOptions(a),this.emailToFriend(),this.assignEvents(),this.colorways(),this.showMfgrColorPattern(),e(window).width()<=1024&&this.scence7FullImageTitle(),this.formatUsCorrency(),e(document).on("click","a.__ks_dyeLotLink__",function(a){a.preventDefault(),e("#custom_add_to_cart").click()});var t="",o=window.location.href,r=window.location.origin,i=s.parseURL(window.location.href),l=i.pathname,d=i.searchObject;Object.keys(d).length>=1?(e.each(d,function(e,a){"c"==e&&(t=a)}),""!=t?(o=r+l+"?c="+t.replace(" ","+"),e("link[rel=canonical]").attr("href",o)):e("link[rel=canonical]").attr("href",o)):e("link[rel=canonical]").attr("href",o)},setOptions:function(a){this.options={sku:"sku",colorWays:".custom-colorways-wrapper",colorWayOptions:".custom-colorways-wrapper a.swatch-option-link-layered",selectedColorWay:".custom-colorways-wrapper.selected a.swatch-option-link-layered",sizePillow:".tocart.pillowsorder",selectedPillow:".tocart.pillowsorder.active",detailApiUrl:"/apiajax/productdetails",categoryPerPageProducts:60},a&&e.extend(this.options,a)},removesamecolorway:function(){e(".box-tocart.size_pillows").data("sku")==e(".custom-colorways-wrapper.pillowswatch").data("sku")&&e(".box-tocart").addClass("removesku")},colorways:function(){var a=e(".custom-colorways-wrapper.colorways.hidecolorways").length,t=e(".custom-colorways-wrapper.colorways").length,o=e(".viewbtns"),s=e("<span/>").addClass("pdpbtns").appendTo(o);if(t>15){e("<button />",{id:"more",type:"button",text:"+"+a,class:"colorwaybutton"}).appendTo(s),e("<button />",{id:"less",type:"button",text:"LESS",class:"colorwaybutton"}).appendTo(s);var r=e("<span/>").addClass("lessarrow").appendTo(o);e("<p />",{id:"content",type:"text",text:"^",class:"arrow"}).appendTo(r);var i=e("<span/>").addClass("morearrow").appendTo(o);e("<p />",{id:"content",type:"text",text:"^",class:"arrow"}).appendTo(i),a>=100?e(".morearrow").css({left:"-10px",top:"-49px"}):e(".morearrow").css({left:"-17px",top:"-48px"}),e("#more").on("click",function(){e("#less").css({display:"block"}),e("#more").css({display:"none"}),e(".morearrow").css({display:"none"}),e(".lessarrow").css({display:"block"}),e(".custom-colorways-wrapper.colorways.hidecolorways").fadeIn().css("display","inline-block")}),e("#less").on("click",function(){e("#more").css({display:"block"}),e("#less").css({display:"none"}),e(".morearrow").css({display:"block"}),e(".lessarrow").css({display:"none"}),e(".custom-colorways-wrapper.colorways.hidecolorways").fadeOut()}),e(".morearrow").on("click",function(){e("#more").css({display:"none"}),e(".morearrow").css({display:"none"}),e("#less").css({display:"block"}),e(".lessarrow").css({display:"block"}),e(".custom-colorways-wrapper.colorways.hidecolorways").fadeIn().css("display","inline-block")}),e(".lessarrow").on("click",function(){e("#less").css({display:"none"}),e(".lessarrow").css({display:"none"}),e("#more").css({display:"block"}),e(".morearrow").css({display:"block"}),e(".custom-colorways-wrapper.colorways.hidecolorways").fadeOut()})}},assignEvents:function(){var t=this,o=this;e(this.options.colorWayOptions).on("click",function(){t.changeColorway(e(this));var a=e(".custom-colorways-wrapper.selected").find("a"),o=e(a).data("manuf")+" "+e(a).data("color")+" "+e(a).data("pattern");e("#pixleehiddenkey").attr("data-sku",o),e("#pixlee_container iframe").remove(),e("#pixlee_container a").hide(),e("#pdpPixleeWrapper").click()}),e(document).on("click",this.options.sizePillow,function(){var a=e(this).data("manuf"),o=e(this).data("color"),s=e(this).data("colorway"),r=e(this).data("pattern");let i=e(this).data("sku"),l=e(this).data("scence7sku"),d=e(this).data("mainskuforscence7"),n=e(this).data("name"),c=e(this).data("pillowsize"),p=e(this).data("pillowurl");var m=e(this).data("priceformatted"),u=e(this).data("category-name"),_=e(this).data("ccenter"),v=e(this).data("material");t.changePillow(e(this)),t.onSizeChange(i,d,l,p),e(".color-SKU span.color").text(s),e(".color-SKU span.sku, #product-purchase-details-sku").text(a+" "+o+" "+r),e(".colorways-desc").text(s),e(".pillowsize").text(c),e(".page-title span.base,.product-purchase-details p.pillowtitle").text(n),e(".product-purchase span.pillowprice").text(m),e(".product-purchase span.price").text(m);var h=m.replace("$","");if(h=h.replace(/,/g,""),e(".product-purchase span .decrease-qty").attr("data-price",h),e(".product-purchase span .increase-qty").attr("data-price",h),e(".product-purchase span .quantitykeyup").attr("data-price",h),e(".stocklimit .popupCloseButton").attr("data-price",h),"Pillows"==u||973==_||"Footwear"==v||"Umbrellas"==v?e(".dye-lot-accordion").hide():e(".dye-lot-accordion").show(),e(".custom-colorways-wrapper.pillowswatch").length>0?("Pillows"==u||"Accessories"==u?(e(".swatch-attribute-options.custom-colorways.clearfix").css("border-top","none"),e(".swatch-attribute-options.clearfix.custom-colorways").css({"border-top":"none","padding-top":"30px"})):e(".swatch-attribute-options.custom-colorways.clearfix").css("border-top","1px solid rgb(196, 174, 162)"),"Pillows"==u&&e(".price").show()):e(".pillowprice").remove(),"Furniture/Lighting"==u&&("Pillow"==u&&e(".price-wrapper .price").show(),e(".price-wrapper .price").show(),e(".pillowprice").show(),e(".price").hide()),"Fabric"==u||"Wallcovering"==u||"Trimming"==u?(e(".section-right").show(),e(".bordertext").show(),e("#orderbuttonsposition").show(),e(".pdp_logout_text").show(),e(".product-info-price").show(),e(".__ks_PDP_notStockedText__").show()):(e(".section-right").hide(),e(".bordertext").hide(),e(".pdp_logout_text").hide(),e(".__ks_PDP_notStockedText__").hide()),"custom_add_to_cart"==this.id){var y=e(this).closest(".actions").find(".custom-colorways-wrapperpillow").html();jQuery(".swatch-attribute.swatch-layered.swatchreplace").empty(),e(".swatch-attribute.swatch-layered.swatchreplace").html(y),e(".custom-colorways-wrappers.pillow").each(function(){e(this).data("scencesku")==d?e(this).addClass("selected"):e(this).removeClass("selected")})}else jQuery(".swatch-attribute.swatch-layered.swatchreplace").show();t.generateminicartpopup(e(this))}),e(document).on("click","#custom_order_memo_to_cart",function(){e(".order_type > select").find("option:contains('Sample')").each(function(){e(this).attr("selected","selected")}),e("#qty").val(1).change(),e(this).prop("disabled",!0),e("#product_addtocart_form").submit()}),e(document).on("click",".pdp-overlay .pdpclose-overlay",function(){return e(".catalog-product-view .pdp-overlay").fadeOut("slow",function(){e("body").css("overflow-y","auto")}),!1}),e(document).on("click",".pdp-overlay .pdp-overlay-color-choise",function(){t.changeSampleRequestSelectedColorWay(this)}),e(document).on("click",".pdp-overlay .padpfilters-submit",function(){return e(".pdp-overlay .pdp-overlay-form").submit(),!1}),e(document).on("submit",".pdp-overlay .pdp-overlay-form",function(){return t.submitSampleRequestForm(this),!1}),jQuery(document).on("click",".s7thumbcell",function(){var a=e(this).children(".s7thumb").css("background-image");-1!=(a=a.replace("url(","").replace(")","").replace(/\"/gi,"")).indexOf("_SCH")?0==e(".full_img_SCH").length&&e("#s7viewer_swatches").after('<div class="full_img_SCH">FULL WIDTH IMAGE</div>'):e(".full_img_SCH").remove()}),e(document).on("click",'.gallery-placeholder a[data-button="download-main-image"]',function(){t.getMainImageLinkAnddownloadMainImage()}),jQuery(document).on("click","#custom_reserve_to_cart",function(t){t.preventDefault(t);var s={title:"10 Day Reserve Request",popupWidth:"600px",data:o.generateReserveFormData()};a.generatePopup(s),e("#custom_reserve_addrs").focus()}),jQuery(document).on("keyup",".custom_reserve_to_cart_form input",function(e){13==e.which&&1==o.validateReserveAdrsForm()&&o.verifyAndSendMailToReserveAdrs()}),jQuery(document).on("click",".custom_reserve_to_cart_form button",function(){1==o.validateReserveAdrsForm()&&o.verifyAndSendMailToReserveAdrs()}),jQuery(document).on("click",".s7thumbcell .s7thumb",function(){o.generatePrintViewImage()}),jQuery(document).on("change","input#custom_reserve_cfa",function(){this.checked?e(".custom_reserve_cfa_adrs").slideDown():e(".custom_reserve_cfa_adrs").slideUp()}),jQuery(document).on("change","input#custom_reserve_cfa_adrs_opt_input",function(){this.checked?e(".custom_reserve_cfa_adrs_wrapper").slideUp():e(".custom_reserve_cfa_adrs_wrapper").slideDown()}),window.matchMedia&&window.matchMedia("print").addListener(function(a){a.matches&&(e(window).scrollTop(0),o.generatePrintViewImage())})},onSizeChange:function(a,t,o,s){e(".custom-colorways-wrapper").removeClass("selected"),e(".tocart.pillows").removeClass("active"),e('.custom-colorways-wrapper[data-sku="'+a+'"]').addClass("selected"),e('.tocart.pillows[data-sku="'+a+'"]').addClass("active"),e(".custom-colorways-wrapper[data-scencesku="+o+"]").addClass("selected"),this.rebuildpillowUrl(s,a),this.showMfgrPillowPattern(),this.showScene7ImageViewerpillows(t)},rebuildpillowUrl:function(a,t){if(t||(t=e(this.options.selectedColorWay).data("sku")),!t)return!1;for(var o,s={},r=location.search.substring(1),i=/([^&=]+)=([^&]*)/g;o=i.exec(r);)s[decodeURIComponent(o[1])]=decodeURIComponent(o[2]);t&&(s.c=t.toUpperCase());var l=e.param(s);history.pushState({},null,a+"?"+decodeURIComponent(l))},generateReserveFormData:function(){var a=e("<div/>").addClass("popup-login-form custom_reserve_to_cart_form"),t=e("<form/>").addClass("custom_reserve_order_form").appendTo(a),o=e("<div/>").addClass("container").appendTo(t),s=e(".custom-colorways-wrapper.selected").find("a"),r=e(s).data("manuf")+" "+e(s).data("color")+" "+e(s).data("pattern"),i=e(s).data("name"),l=e(s).data("category-name"),d=e(s).data("priceformatted"),n=e(s).data("image"),c=e(s).data("colorway"),p=e(s).data("uom-short"),m=e(s).data("url"),u=e(s).data("uom"),_=e(s).data("category-name");e('<input name="reserve_item_sku" type="hidden" value="'+r+'" />').appendTo(o),e('<input name="reserve_item_name" type="hidden" value="'+i+'" />').appendTo(o),e('<input name="reserve_item_cat_name" type="hidden" value="'+l+'" />').appendTo(o),e('<input name="reserve_item_price" type="hidden" value="'+d+'" />').appendTo(o),e('<input name="reserve_item_image" type="hidden" value="'+n+'" />').appendTo(o),e('<input name="reserve_item_colorway" type="hidden" value="'+c+'" />').appendTo(o),e('<input name="reserve_item_uom" type="hidden" value="'+p+'" />').appendTo(o),e('<input name="reserve_item_url" type="hidden" value="'+m+'" />').appendTo(o),e('<input name="reserve_item_full_uom" type="hidden" value="'+u+'" />').appendTo(o);var v=e("<div/>").css({display:"inline-block",margin:"0"}).appendTo(o);e("<span/>").text("Product Quantity: ").css({width:"70%"}).appendTo(v),e("<input />",{name:"custom_reserve_qty",id:"custom_reserve_qty",type:"number",min:e("#qty").val(),value:e("#qty").val()}).css({width:"25%",margin:"0 0.25em"}).appendTo(v);var h=u+"(S)";e("<span/>").text(h).css({"text-transform":"uppercase"}).appendTo(v);var y=e("<div/>").appendTo(o);e("<input />",{name:"custom_reserve_name",id:"custom_reserve_name",type:"text",placeholder:"Name"}).appendTo(y),e("<input />",{name:"custom_reserve_email",id:"custom_reserve_email",type:"email",placeholder:"Email"}).appendTo(y),e("<input />",{name:"custom_reserve_shipping_adrs",id:"custom_reserve_shipping_adrs",type:"text",placeholder:"Shipping Address"}).appendTo(y),e("<input />",{name:"custom_reserve_suit",id:"custom_reserve_suit",type:"text",placeholder:"Suite, Apt, Fl #"}).appendTo(y),e("<input />",{name:"custom_reserve_city",id:"custom_reserve_city",type:"text",placeholder:"City"}).appendTo(y);var f=e("<select />",{name:"custom_reserve_country",id:"custom_reserve_country",placeholder:"Select Country"}).appendTo(y);e('<option value="" >Select</option>').appendTo(f);var w=JSON.parse(allowedCountriesList);if(e(w).each(function(a,t){e.each(t,function(a,t){e('<option value=">'+a+'">'+t+"</option>").appendTo(f)})}),e("<input />",{name:"custom_reserve_state",id:"custom_reserve_state",type:"text",placeholder:"State/Province"}).appendTo(y),e("<input />",{name:"custom_reserve_zip",id:"custom_reserve_zip",type:"text",placeholder:"Zipcode"}).appendTo(y),e("<textarea />",{name:"custom_reserve_comments",id:"custom_reserve_comments",cols:"5",rows:"5",placeholder:"Comments"}).appendTo(y),"fabric"==(_=e.trim(_).toLowerCase())){var g=e("<div />",{class:"custom_reserve_cfa_wrapper"});e("<span />",{class:"custom_reserve_cfa_input",type:"checkbox",html:'<input type="checkbox" id="custom_reserve_cfa" name="custom_reserve_cfa" />'}).appendTo(g)}else g=e("<div />",{class:"custom_reserve_cfa_wrapper"}).css({display:"none"}),e("<span />",{class:"custom_reserve_cfa_input",type:"checkbox",html:'<input type="checkbox" id="custom_reserve_cfa" name="custom_reserve_cfa" disabled />'}).appendTo(g);e("<span />",{class:"custom_reserve_cfa_text",text:"Send Cutting for Approval"}).appendTo(g),e(g).appendTo(y);var T=e("<div />",{class:"custom_reserve_cfa_adrs"}).css({display:"none"}),b=e("<div />",{class:"custom_reserve_cfa_adrs_title",html:"<span>CFA Shipping Address:  </span>"});e("<span />",{class:"custom_reserve_cfa_adrs_opt",type:"checkbox",html:'(&nbsp;&nbsp;<input type="checkbox" id="custom_reserve_cfa_adrs_opt_input" name="custom_reserve_cfa_adrs_opt_input" />&nbsp;&nbsp;Same as above address&nbsp;&nbsp;)'}).appendTo(b),e(b).appendTo(T);var C=e("<div />",{class:"custom_reserve_cfa_adrs_wrapper"});e("<input />",{name:"custom_reserve_cfa_shipping_adrs",id:"custom_reserve_cfa_shipping_adrs",type:"text",placeholder:"Shipping Address"}).appendTo(C),e("<input />",{name:"custom_reserve_cfa_suit",id:"custom_reserve_cfa_suit",type:"text",placeholder:"Suite, Apt, Fl #"}).appendTo(C),e("<input />",{name:"custom_reserve_cfa_city",id:"custom_reserve_cfa_city",type:"text",placeholder:"City"}).appendTo(C);var I=e("<select />",{name:"custom_reserve_cfa_country",id:"custom_reserve_cfa_country",placeholder:"Select Country"}).appendTo(C);e('<option value="" >Select</option>').appendTo(I);var k=JSON.parse(allowedCountriesList);e(k).each(function(a,t){e.each(t,function(a,t){e('<option value=">'+a+'">'+t+"</option>").appendTo(I)})}),e("<input />",{name:"custom_reserve_cfa_state",id:"custom_reserve_cfa_state",type:"text",placeholder:"State/Province"}).appendTo(C),e("<input />",{name:"custom_reserve_cfa_zip",id:"custom_reserve_cfa_zip",type:"text",placeholder:"Zipcode"}).appendTo(C),e(C).appendTo(T),e(T).appendTo(y),e("<div/>").addClass("custom_reserve_adrs_msg").appendTo(o);var E=e("<div/>").addClass("custom_reserve_btn").appendTo(o);return e("<button />",{name:"btnReserveAdrs",id:"btnReserveAdrs",type:"button",text:"Send",class:"custom_reserve_adrs_cls"}).appendTo(E),a},validateEmail:function(e){return/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)},validateReserveAdrsForm:function(){var a=!0,t="",o=e.trim(e("#custom_reserve_name").val()),s=e.trim(e("#custom_reserve_email").val()),r=e.trim(e("#custom_reserve_shipping_adrs").val()),i=e.trim(e("#custom_reserve_city").val()),l=e.trim(e("#custom_reserve_state").val()),d=e.trim(e("#custom_reserve_zip").val());return e.trim(e("#custom_reserve_comments").val()),""==o?(a=!1,t="Pease enter Name",e("#custom_reserve_name").focus()):""==s?(a=!1,t="Please enter Email address",e("#custom_reserve_email").focus()):this.validateEmail(s)?""==r?(a=!1,t="Please enter Shipping Address",e("#custom_reserve_shipping_adrs").focus()):""==i?(a=!1,t="Please enter City",e("#custom_reserve_city").focus()):""==l?(a=!1,t="Please enter State/Province",e("#custom_reserve_state").focus()):""==d&&(a=!1,t="Please enter Zipcode",e("#custom_reserve_zip").focus()):(a=!1,t="Invalid Email address",e("#custom_reserve_email").focus()),e(".custom_reserve_adrs_msg").html(t),a},verifyAndSendMailToReserveAdrs:function(){var a=this,t=e(".custom_reserve_order_form").serialize();e.ajax({type:"POST",dataType:"JSON",url:"/apiajax/index/reserve",data:t,beforeSend:function(e){a.commonLoader("show")}}).done(function(a){e(".__popup_content__ .popup-login-form.custom_reserve_to_cart_form").html("");var t=e("#custom_reserve_to_cart").attr("data-prod-reserve-form-msg");e("<div />").addClass("custom_reserve_success_msg").html(t).appendTo(".__popup_content__ .popup-login-form.custom_reserve_to_cart_form"),1==a.error&&e(".__popup_content__ .popup-login-form.custom_reserve_to_cart_form").html(a.message)}).fail(function(a,t,o){console.log("Reserve Order Mail failed: ",t),e(".__popup_content__ .popup-login-form.custom_reserve_to_cart_form").html(""),e("<div />").addClass("custom_reserve_fail_msg").html("Some thing went wrong!, Please try again later.").appendTo(".__popup_content__ .popup-login-form.custom_reserve_to_cart_form")}).complete(function(e){a.commonLoader("hide")})},validateMaxLimitPerDay:function(t){var o=e.cookie("today-total-samples");(!o||null==o||o<1)&&(o=0);var s=o=parseInt(o),r=parseInt(e(".pdp-overlay-variant-list .pdp-overlay-color-choise.selected").length);if("onload"==t&&s+r>this.maxLimitedSamplesPerDay)return e(".pdp-overlay-variant-list .pdp-overlay-color-choise.selected").removeClass("selected"),this.setSelectedSampleColorways(),!1;var i=e.trim(e("#inquiry-name").val()),l={title:"Request Sample",popupWidth:"40%",data:"<h6>Hi "+(i=""==i?" Guest":i)+'</h6><p>Your request has exceeded our maximum amount of six samples per customer, per day. If you require more than six samples, please contact our customer service team at <a href="mailto:info@scalamandre.com" title="info@scalamandre.com">info@scalamandre.com</a></p>'};return s>=this.maxLimitedSamplesPerDay?(a.generatePopup(l),!1):!(s+r>this.maxLimitedSamplesPerDay&&(a.generatePopup(l),1))},sampleRequestFormData:function(a){if("set"==a){var t={};t.name=e.trim(e("#pdp-overlay-form #inquiry-name").val()),t.email=e.trim(e('#pdp-overlay-form input[name="email"]').val()),t.address1=e.trim(e('#pdp-overlay-form input[name="shippingaddress"]').val()),t.address2=e.trim(e('#pdp-overlay-form input[name="suite"]').val()),t.city=e.trim(e('#pdp-overlay-form  input[name="city"]').val()),t.state=e.trim(e('#pdp-overlay-form  input[name="state"]').val()),t.zip=e.trim(e('#pdp-overlay-form  input[name="zipcode"]').val()),t.notes=e.trim(e('#pdp-overlay-form  textarea[name="comment"]').val()),localStorage.setItem("sampleRequestForm",JSON.stringify(t))}else"remove"==a?localStorage.removeItem("sampleRequestForm"):(t=localStorage.getItem("sampleRequestForm"))&&(t=JSON.parse(t),e("#pdp-overlay-form #inquiry-name").val(t.name),e('#pdp-overlay-form input[name="email"]').val(t.email),e('#pdp-overlay-form input[name="shippingaddress"]').val(t.address1),e('#pdp-overlay-form input[name="suite"]').val(t.address2),e('#pdp-overlay-form  input[name="city"]').val(t.city),e('#pdp-overlay-form  input[name="state"]').val(t.state),e('#pdp-overlay-form  input[name="zipcode"]').val(t.zip),e('#pdp-overlay-form  textarea[name="comment"]').val(t.notes))},submitSampleRequestForm:function(a){var t=this;if(0==this.validateMaxLimitPerDay())return!1;var o=e(a),s=o.attr("action"),r=e(".pdp-overlay-variant-list .pdp-overlay-color-choise.selected").length;if(r<1)return e(".pdp-overlay-color-choise").css("border","1px solid #ff0000"),!1;if(0==o.valid())return!1;var i=o.serialize(),l=o.find("#inquiry-name").val();return this.sampleRequestFormData("set"),e("div[data-sample-req-resp]").html(""),t.commonLoader("show"),e.ajax({type:"POST",url:s,dataType:"JSON",data:i,success:function(a){if(t.commonLoader("hide"),0==a.errors||1==a.success){o.hide(),e(".pdp-overlay .pdp-overlay-variant-list").addClass("stop"),e(".pdp-overlay .padpfilters-submit").css("display","none"),e(".pdp-overlay .pdp-overlay-submit-wrapper").css("display","none"),e(".pdp-overlay .pdp-overlay-details .pdp-overlay-colorway-heading").html("Requested Samples"),e(".pdp-overlay .pdp-overlay-variant-list .pdp-overlay-color-choise").parents("li").css("display","none"),e(".pdp-overlay .pdp-overlay-variant-list .pdp-overlay-color-choise.selected").parents("li").css("display","inline-block"),e(".pdp-overlay .pdp-overlay-heading").html("Thank you "+l+"!").css("max-width","100%"),e(".pdp-overlay .pdp-overlay-description").html("Our team has received your request and your sample will be on the way shortly. In the meantime, you can visit your local Scalamandre dealer to see more great Scalamandre products."),o.find("input[type=text], input[type=email], textarea").val("");var s=e.cookie("today-total-samples");!s||null==s||s<1?e.cookie("today-total-samples",r,{expires:1}):(s=parseInt(s),e.cookie("today-total-samples",s+r))}else e("div[data-sample-req-resp]").html(a.message);grecaptcha.reset()},error:function(a){t.commonLoader("hide"),e("div[data-sample-req-resp]").html("Some thing went wrong!, please try again later."),grecaptcha.reset()}}),!1},changeSampleRequestSelectedColorWay:function(a){if(e(".pdp-overlay .pdp-overlay-variant-list").hasClass("stop"))return!1;if(0==this.validateMaxLimitPerDay())return!1;if(e(".pdp-overlay-color-choise").css("border","none"),e(a).hasClass("selected"))e(a).removeClass("selected");else{if(e(".pdp-overlay-variant-list .pdp-overlay-color-choise.selected").length>=1e4)return console.log("You can select max 10000 colorways only!"),!1;e(a).addClass("selected")}return this.setSelectedSampleColorways(),!1},setSelectedSampleColorways:function(){var a=e(".pdp-overlay-variant-list .pdp-overlay-color-choise.selected"),t=[];e(a).length>0&&e(a).each(function(){t.push(e(this).data("prodId"))}),e(".pdp-overlay-form #color_way").val(t.join(","))},showSampleRequestPopup:function(){e(window).scrollTop(0),e("div[data-sample-req-resp]").html(""),e(".pdp-overlay .pdp-overlay-form").show(),e(".pdp-overlay .padpfilters-submit").css("display","block"),e(".pdp-overlay .pdp-overlay-details .pdp-overlay-colorway-heading").html("Pick Colorway/s"),e(".pdp-overlay .pdp-overlay-variant-list .pdp-overlay-color-choise").parents("li").css("display","inline-block"),e(".pdp-overlay .pdp-overlay-heading").html("Request Sample").removeAttr("style"),e(".pdp-overlay .pdp-overlay-description").html("Select up to two colorways to sample. To see more of these products please contact your local Scalamandre dealer.");var a=e(".custom-colorways-wrapper");return e("ul.pdp-overlay-variant-list").empty(),e.each(a,function(a,t){var o=e(t).hasClass("selected"),s=e(t).find("a.swatch-option-link-layered");o&&(e("#current_product").val(e(s).data("name")),e("#current_product_id").val(e(s).data("prodId")));var r=o?" selected":"",i=e("<li />"),l=e("<a />",{class:"pdp-overlay-color-choise"+r,href:"javascript:void(0);",style:'background-image: url("'+e(t).find("img").attr("src")+'")',"data-prod-id":e(s).data("prodId"),"data-sku":e(s).data("sku"),"data-title":e(t).find("p").html()}),d=e("<p />",{class:"pdp-overlay-colorway-name",html:e(t).find("p").html()}),n=e("<p />",{class:"pdp-overlay-colorway-sku",html:e(s).data("sku")});l.appendTo(i),d.appendTo(i),n.appendTo(i),i.appendTo("ul.pdp-overlay-variant-list")}),e("body").css("overflow-y","hidden"),e(".catalog-product-view .pdp-overlay").fadeIn(500),this.setSelectedSampleColorways(),this.sampleRequestFormData(),this.validateMaxLimitPerDay("onload"),grecaptcha.reset(),!1},emailToFriend:function(){var t=this;e("a.action.mailto1.friend").on("click",function(o){o.preventDefault();var s=e(window).width(),r=e(window).height(),i=s<768?s:830,l=r<600?r:400,d=e("a.action.mailto1.friend").attr("href"),n={title:"Share The House of Scalamandré",popupWidth:i,additionalClass:"__scala_shareOnEmailPopup__",data:e("<iframe />",{name:"mailtofriend",id:"mailtofriend",src:d}).css({width:"100%",height:l+"px"})};a.generatePopup(n),e(".__popup_body__ .__popup_content__").css({overflow:"hidden"}),t.removeHeaderFooter();var c=setInterval(function(){var a=e("#mailtofriend").contents().find("#product-sendtofriend-form");if(a.length>0){a.css({width:"100%","margin-bottom":0}),a.contents().find("button.action.submit.primary").css({"margin-bottom":0}),a.contents().find("legend.legend").css({margin:0});var o=setInterval(function(){var a=e("#mailtofriend").contents().find(".__addInviteBtn");a.length>0&&(a.remove(),clearInterval(o))},5);a.mage("validation",{ignore:":hidden"}).find("input:text").attr("autocomplete","off"),a.find("button.action.submit.primary").click(function(){if(a.validation("isValid")){t.removeHeaderFooter();var o=e("<div />",{id:"emailToFriendSuccessMessage",html:"<h2>Successfully Shared!</h2>"}).css({width:"100%",height:l+"px"});e("#mailtofriend").hide(),e(".__popup_content__").append(o);var s=e("<div />",{id:"__popupCloseButton__",html:"<button><span>Close Window</span></button>"});e(".__popup_content__").append(s),e("#__popupCloseButton__ button").on("click",function(a){a.preventDefault(),e(".__scala_shareOnEmailPopup__ .__popup_closeBtn__").trigger("click")})}}),clearInterval(c)}},5),p=setInterval(function(){e("#mailtofriend").contents().find("span._mailRecipientsName").text("Your Friends Name"),e("#mailtofriend").contents().find("span._mailRecipientsEmail").text("Their Email Address"),"Your Friends Name"==e("#mailtofriend").contents().find("span._mailRecipientsName").text()&&clearInterval(p)},5),m=setInterval(function(){if(e("#mailtofriend").contents().find(".__SelectedColorwaySku__").length>0){var a=e(t.options.selectedColorWay).data("sku");console.log("Selected SKU element!",a),e("#mailtofriend").contents().find(".__SelectedColorwaySku__").val(a),clearInterval(m)}},5)})},showMfgrColorPattern:function(){var a=e(this.options.selectedColorWay);if(0==a.length)return console.log("No Selected Colorway Product!"),!1;var t=a.data("categoryName"),o=a.data("prodId"),s=a.data("manuf"),r=a.data("color"),i=(a.data("colorBucket"),a.data("name")),l=a.data("colorway"),d=a.data("pattern"),n=a.data("price"),c=a.data("priceformatted"),p=s+" "+r+d,m=a.data("collection"),u=a.data("pdpcollection"),_=a.data("material"),v=a.data("materialIdVal"),h=a.data("addedToWishlist"),y=a.data("sku"),f=a.data("samplesOrdered"),w=a.data("scence7sku"),g=a.data("pricetext"),T=a.data("discounttext"),b=a.data("normalprodprice"),C=a.data("abccode"),I=a.data("normalprodprice");if(this.getAlsoAvailableOptions(y),I)b="NET "+I;else var k=a.data("normaldisprice");var E=a.data("fourtyperprice"),S=a.data("stockavailabletext"),P=a.data("ccenter"),A=a.data("sku"),R=e(".disabledproducts").data("disabledproducts");"Accessories"!=t&&"Pillows"!=t?-1!=jQuery.inArray(A,R)?e("#custom_add_to_cart").addClass("disabled"):e("#custom_add_to_cart").removeClass("disabled"):e(".pillowsorder").each(function(){var a=e(this).data("sku");-1!=jQuery.inArray(a,R)?e(this).addClass("disabled"):e(this).removeClass("disabled")}),e(".selectsize_pillows").hide(),e(".selectsize_pillows").insertAfter(e(".swatch-attribute.swatch-layered.swatchreplace")),e(".box-tocart.size_pillows").each(function(){e(this).data("sku")==e(".custom-colorways-wrapper.colorways.selected a.swatch-option-link-layered").data("sku")?(e(this).parent().show(),e(this).parent(".accordion-body.accordianbuttons").show(),e(this).parents(".selectsize_pillows").show(),e(".accordion-header span").removeClass("fa-plus").addClass("fa-minus"),e(this).parents(".accordion-body").addClass("active"),setTimeout(function(){var a=e(".box-tocart.size_pillows").children(".custom-colorways-wrapper.pillowswatch.selected");e(a).parent().addClass("removesku")},1e3)):e(this).parent().hide()}),1==jQuery(".selectsize_pillows:visible").find(".pilloworiginalprice").length&&jQuery(".actions").each(function(a){1!=e(this).siblings(".pilloworiginalprice").length&&e(this).css("height","86px")}),e(".box-tocart.shades").each(function(){e(this).data("mainsku")==e(".custom-colorways-wrapper.colorways.selected a.swatch-option-link-layered").data("sku")?e(this).parent().show():e(this).parent().hide()}),e("button.tocart.pillows").each(function(){e(this).data("sku")==e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("sku")&&e(this).addClass("active")}),e(".custom-colorways-wrapper.colorways").each(function(){if(e(this).data("sku")==e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("sku")&&e(this).addClass("selected"),e(".custom-colorways-wrapper.colorways").length>15){var a=e(this).find(".swatch-option img");a.prop("src",a.prop("src").replace("300BY400","300BY300")),e(".swatch-attribute-options.clearfix.custom-colorways .swatch-option.color").css("height","90px"),e(".swatch-attribute-options.clearfix.custom-colorways .custom-colorways-wrapper p").css("margin-top","-25px")}}),"Lamps"==_||"Wall Lights"==_||"Floor Lamps"==_||"Table Lamps"==_?e("a.__ks_specSheet__").attr("href","https://s7d2.scene7.com/is/content/starkcarpet/Fabric/"+w.replace(" ","+")+"_tearsheet.pdf"):e("a.__ks_specSheet__").attr("href","/ProductDetailsPdf.php?selectedsku="+y.replace(" ","+"));var x=a.data("availableToReserve"),L=a.data("memoAvailable"),D=a.data("a2000ItemOk");e("a.add-to-wishlist").attr("data-id",o),e("a.add-to-wishlist").removeClass("added_in_wishlist"),1==h&&e("a.add-to-wishlist").addClass("added_in_wishlist"),e("head title").text(i+" "+l+" Scalamandre"),e(".color-SKU span.color").text(l),e(".color-SKU span.sku, #product-purchase-details-sku").text(s+" "+r+" "+d),e(".colorways-desc").text(l),e(".product-info-custom-tierprice-title").text(g),e(".product-info-custom-tierprice-title-text").text(T),e(".product-info-custom-tierprice").text(E),e(".product-info-custom-tierprice-discount").text(b),e(".product-limited-clearence-text").text(S),e("#apiInvetoryData").attr("data-itemid",y),e("form#product_addtocart_form").attr("data-product-sku",p),e('form#product_addtocart_form input[name="product"]').val(o),e(".pillowpricewithoutsizes span.roundedprice").text(n);var O=setInterval(function(){e(".price-wrapper span.price").text(c),e(".price-wrapper span.price").first().text()==c&&clearInterval(O)},50);"R"==C&&P>=600&&P<=799?(e(".tooltip").show(),e(".tooltiptext").show()):(e(".tooltip").hide(),e(".tooltiptext").hide()),e("#custom_reserve_to_cart").prop("disabled",!0),"Y"==x&&e("#custom_reserve_to_cart").prop("disabled",!1),e("#custom_order_memo_to_cart").prop("disabled",!0),"Y"==L&&1==D&&f<2&&e("#custom_order_memo_to_cart").prop("disabled",!1),setTimeout(function(){"R"==C&&P>=600&&P<=799?e("#custom_order_memo_to_cart").prop("disabled",!1):("Y"==L&&0==D||"N"==L&&0==D||"N"==L&&1==D)&&e("#custom_order_memo_to_cart").prop("disabled",!0)},1e3),e(".pdp-collection p").remove(),e("span.addingClass").remove(),e("span.newAddClass").remove(),e("span.Add_class").remove();var N=m[0].label;if("DORSET COAST & WOODLAND ESTATE"==N){var M=N.split("&"),U=M[0].toString(),F=M[1].toString(),q=m[0].url.split("+%26+"),H=q[0],W="/search/results/category?COLLECTION="+q[1];if(2==M.length){var B=e("<p />"),Y=e("<a />",{text:U.toLowerCase()+" Collection",title:U.toLowerCase()+" Collection",href:H}),j=e("<span/>",{text:" and "}).addClass("newAddClass"),G=e("<a />",{text:F+" Collection",title:F+" Collection",href:W});B.appendTo(".pdp-collection"),Y.appendTo(B),j.appendTo(B),G.appendTo(B),e.each(m,function(a,t){a<m.length-1&&e("<span/>",{text:" and "}).addClass("Add_class").appendTo(".pdp-collection"),e(".pdp-collection").removeClass("hide")})}}else e.each(m,function(a,t){var o=t.url,s="",r="";if(o){t.label&&("the metropolitan museum of art"==(s=t.label.toLowerCase())?(s="The Metropolitan Museum of Art",r="text-transform: none;"):(s=t.label.toLowerCase(),r=""));var i=e("<p />"),l=e("<a />",{text:s+" Collection",title:t.label+" Collection",href:o,style:r});i.appendTo(".pdp-collection"),l.appendTo(i),a<m.length-1&&e("<span/>",{text:" and "}).addClass("addingClass").appendTo(".pdp-collection"),e(".pdp-collection").removeClass("hide")}});if(e(".pdp-material").html(""),v.length>0){var V=a.data("baseUrl");e.each(v,function(a,t){if("Lampshades"==t.label||"LAMPSHADES"==t.label)var o=e("<a />",{text:t.label,title:t.label,class:"lampshade"});else{var s=t.label.replace(" ","-").replace("-/ ","-");o=e("<a />",{text:t.label,title:t.label,href:V+"?material="+s})}o.appendTo(".pdp-material"),a<v.length-1&&e("<span/>",{text:", "}).appendTo(".pdp-material")}),e(".pdp-material").removeClass("hide")}var Q=e("#product_addtocart_form"),z=Q.attr("action"),K=z.split("/");if(K[K.length-2]=o,z=K.join("/"),Q.attr("action",z),""!=E||""!=k?(e(".stock.available").css("display","block"),e(".stock.available span:first").removeClass("bordertext")):(e(".stock.available span:first").addClass("bordertext"),e(".stock.available").css("display","inline-block")),null!=u.Collection_Image&&""!=u.Collection_Image&&null!=u.Collection_Image&&0==e(".leftContainer .colletion_image_pdp").length){var J=e("<div />").addClass("colletion_image_pdp").appendTo(".socialContainer .leftContainer"),$=e("<a/>",{href:u.Collection_Link,class:"redirect-main-image","data-button":"redirect-main-image"});e("<img />",{src:u.Collection_Image,alt:u.Collection_Name,class:"collecion_pdp_img"}).appendTo($),$.appendTo(J)}this.createSoldByText(a),this.createSoldByTextinDetailsTable(a),this.createCustomOptions(a),this.getProductDetailsFromApi(),this.showScene7ImageViewer(),this.rebuildUrl(),this.getPrevNextProducts(),this.getInventoryFromApi(),this.getYouMightAlosLikeCol(),this.generatePrintViewColorways(),this.generateminicartpopup(a)},showMfgrPillowPattern:function(){var a=e(this.options.selectedPillow),t=e(this.options.selectedColorWay),o=e(this.options.selectedPillow).length,s=a.data("prodid"),r=a.data("sku"),i=a.data("colorway"),l=a.data("manuf"),d=a.data("color"),n=(i=a.data("colorway"),a.data("pattern")),c=(a.data("price"),a.data("image"),a.data("priceformatted")),p=a.data("name"),m=l+" "+d+n,u=a.data("collection"),_=(a.data("material"),a.data("materialIdVal")),v=a.data("addedToWishlist"),h=a.data("sku"),y=a.data("samplesOrdered"),f=a.data("category-name"),w=t.data("sku"),g=e(".disabledproducts").data("disabledproducts");"Accessories"!=f&&"Pillows"!=f?-1!=jQuery.inArray(w,g)?e("#custom_add_to_cart").addClass("disabled"):e("#custom_add_to_cart").removeClass("disabled"):e(".pillowsorder").each(function(){var a=e(this).data("sku");-1!=jQuery.inArray(a,g)?e(this).addClass("disabled"):e(this).removeClass("disabled")}),e("a.__ks_specSheet__").attr("href","/ProductDetailsPdf.php?selectedsku="+h.replace(" ","+"));var T=a.data("availableToReserve"),b=a.data("memoAvailable"),C=a.data("a2000ItemOk");e("a.add-to-wishlist").attr("data-id",s),e("a.add-to-wishlist").removeClass("added_in_wishlist"),1==v&&e("a.add-to-wishlist").addClass("added_in_wishlist"),e("head title").text(p+" "+i+" Scalamandre"),e("#apiInvetoryData").attr("data-itemid",m),e("form#product_addtocart_form").attr("data-product-sku",r),e('form#product_addtocart_form input[name="product"]').val(s);var I=setInterval(function(){var a=e(".price-wrapper span.price").text();e(".price-wrapper span.price").text(c),a==c&&clearInterval(I)},50);e("#custom_reserve_to_cart").prop("disabled",!0),"Y"==T&&e("#custom_reserve_to_cart").prop("disabled",!1),e("#custom_order_memo_to_cart").prop("disabled",!0),"Y"==b&&1==C&&y<2&&e("#custom_order_memo_to_cart").prop("disabled",!1),e(".pdp-collection p").remove();var k=u[0].label.split("&"),E="",S="";k[0]&&(E=k[0].toString()),k[1]&&(S=k[1].toString()),e("span.addingClass").remove(),e("span.newAddClass").remove(),e("span.Add_class").remove(),e(".pdp-collection span.addingAndClassNew").remove(),e(".pdp-collection span.addingAndClassFirst").remove(),e(".pdp-collection span.addingAndClass").remove();var P=u[0].url.split("+%26+"),A=P[0],R="/search/results/category?COLLECTION="+P[1];if(2==k.length){var x=e("<p />"),L=e("<a />",{text:E.toLowerCase()+" Collection",title:E+" Collection",href:A}),D=e("<span/>",{text:" and "}).addClass("addingAndClassNew"),O=e("<a />",{text:S.toLowerCase()+" Collection",title:S+" Collection",href:R});x.appendTo(".pdp-collection"),L.appendTo(x),D.appendTo(x),O.appendTo(x),key<u.length-1&&e("<span/>",{text:" and "}).addClass("addingAndClassFirst").appendTo(".pdp-collection"),e(".pdp-collection").removeClass("hide")}else e.each(u,function(a,t){var o=t.url;if(o){var s=e("<p />"),r=e("<a />",{text:t.label.toLowerCase()+" Collection",title:t.label+" Collection",href:o});s.appendTo(".pdp-collection"),r.appendTo(s),a<u.length-1&&e("<span/>",{text:" and "}).addClass("addingAndClass").appendTo(".pdp-collection"),e(".pdp-collection").removeClass("hide")}});if(e(".pdp-material").html(""),_.length>0){var N=a.data("baseUrl");e.each(_,function(a,t){var o=t.label.replace(" ","-").replace("-/ ","-");e("<a />",{text:t.label,title:t.label,href:N+"?material="+o}).appendTo(".pdp-material"),a<_.length-1&&e("<span/>",{text:", "}).appendTo(".pdp-material")}),e(".pdp-material").removeClass("hide")}var M=e("#product_addtocart_form"),U=M.attr("action"),F=U.split("/");F[F.length-2]=s,U=F.join("/"),M.attr("action",U),0!=o?(this.getPillowProductDetailsFromApi(),this.showScene7ImageViewerpillows()):(this.getProductDetailsFromApi(),this.showScene7ImageViewer()),this.getPrevNextProducts(),this.getYouMightAlosLikeCol(),this.createSoldByText(a),this.createCustomOptions(a)},getAlsoAvailableOptions:function(a){e.ajax({url:"/apis/index/getalsoavailable?"+jQuery.now(),type:"POST",data:{selectedsku:a},complete:function(a){if(1==a.responseText)var t=setInterval(()=>{e(".alsoavailablecards"),0==e("#available_swatch_count").val()&&(clearInterval(t),e(".selectsize_pillows").hide())},10);else t=setInterval(()=>{e(".alsoavailablecards").length>0&&(clearInterval(t),e(".alsoavailablecards").empty(),e(".alsoavailablecards").append(a.responseText),e(".alsoavailablecards").show(),e(".selectsize_pillows").show()),0==e("#available_swatch_count").val()&&(clearInterval(t),e(".selectsize_pillows").hide())},10)},error:function(e,a,t){console.log("get available options Test status",a)}})},scence7FullImageTitle:function(){setInterval(function(){var a=e('.s7thumbcell .s7thumb[state="selected"]');if(e(a).length>0){var t=e(a).css("background-image");-1!=(t=t.replace("url(","").replace(")","").replace(/\"/gi,"")).indexOf("_SCH")?0==e(".full_img_SCH").length&&e("#s7viewer_swatches").after('<div class="full_img_SCH">FULL WIDTH IMAGE</div>'):e(".full_img_SCH").remove()}},20)},getPrevNextProducts:function(){let a=this,t=s.parseURL().searchObject;var o=e.map(a.options.categorySubFilters.split(","),e.trim);let r={};e.each(t,function(a,t){if(a=decodeURIComponent((a+"").replace(/\+/g," ")).toUpperCase(),-1==e.inArray(a,o))return!0;let s=t.split(",");r[a]||(r[a]={}),e.each(s,function(e,t){r[a][e]=t})});let i="";Object.keys(r).length>0&&(i=JSON.stringify(r));var l={};l.category=t.category?decodeURIComponent(t.category):"Fabric,Wallcovering,Trimming",l.min_products=0,l.max_products=5e4,l.sort=t.sort?decodeURIComponent(t.sort):"NEW",l.Subfilters=i,l.searchword=t.q?decodeURIComponent(t.q):"",l.sku=t.c,e.ajax({type:"POST",dataType:"JSON",url:a.options.apiUrlPreNextProducts,data:l,beforeSend:function(e){}}).done(function(e){a.generatePrevNextButtons(e)}).fail(function(e,a,t){}).complete(function(e){})},generatePrevNextButtons:function(a){if(e(".__PdpPrevNext__").remove(),a.Products){let t=a.Products,o=5/this.options.categoryPerPageProducts,r=s.parseURL().searchObject;r.p=Math.ceil(o);let i=e("<div/>").addClass("__PdpPrevNext__").appendTo(".product-social-links"),l=e("<div/>").addClass("__PdpPrevNextTitle__").appendTo(i),d=e.trim(e.param(r));""!=d&&(d="?"+d);let n="/search/results/category"+decodeURIComponent(d);e("<a/>",{title:"Back to Search Results",text:"Search Results",href:n}).appendTo(l),setInterval(function(){"NotUpdated"==e("a.continue-shopping").attr("data-plpbackbutton")&&(e("a.continue-shopping").attr("data-plpbackbutton","Updated"),e("a.continue-shopping").attr("href",n))},5);let c=e("<ul/>").addClass("__PdpPrevNextContent__").appendTo(i);e.each(t,function(a,t){let o=s.parseURL(t.PRODUCTURL),i=o.searchObject;r.c=i.c,0==a&&"NEXT"==t.DIRECTION&&e("<li/>").addClass("__PdpImgWrapper__ PREV_").appendTo(c);let l=e("<li/>").addClass("__PdpImgWrapper__ "+t.DIRECTION.toUpperCase()+"_").appendTo(c),d=o.pathname;var n=e.trim(e.param(r));""!=n&&(n="?"+n),d+=decodeURIComponent(n);let p=e("<a/>",{href:d,title:t.PATTERN_NAME+" "+t.COLOR_NAME}).appendTo(l);e("<img/>",{src:t.ITEMTHUMBNAIL,alt:t.PATTERN_NAME+" "+t.COLOR_NAME}).appendTo(p),e("<span/>",{class:"iconWrapper"+t.DIRECTION+"_",html:'<svg x="0px" y="0px" viewBox="0 0 20 10" style="enable-background:new 0 0 20 10; " xml:space="preserve"><style type="text/css">.st0{fill:#141414;}</style><path id="previous.product" class="st0" d="M0.1,4.7C0,4.9,0,5.1,0.1,5.3c0,0,0,0,0,0l4.5,4.5C4.8,10,5,10,5.2,9.9 c0,0,0,0,0,0l0.5-0.5c0.2-0.2,0.2-0.5,0-0.6c0,0,0,0,0,0L2.8,5.8h16.7c0.2,0,0.4-0.2,0.4-0.5V4.7c0-0.2-0.2-0.4-0.4-0.5H2.8l2.9-3  c0.2-0.2,0.2-0.5,0-0.6c0,0,0,0,0,0L5.2,0.1C5,0,4.8,0,4.6,0.1c0,0,0,0,0,0L0.1,4.7z"/></svg>'}).appendTo(p)})}},generatePrintViewImage:function(){var a=this,t=setInterval(function(){var o=e('.s7thumbcell .s7thumb[state="selected"]');if(e(o).length>0){var s=e(a.options.selectedColorWay).data("image");e(".__PrintScreenMainImage__").remove();var r=e("<div/>").addClass("__PrintScreenMainImage__"),i=e("<div />").addClass("__PrintMainImage__").appendTo(r);e(i).html(e("<img/>",{src:s,alt:""}));var l=e("<div/>").addClass("__PrintScenceySwatches__").appendTo(r);clearInterval(t);var d=e(".s7thumbcell .s7thumb");e(d).length>0&&e.each(d,function(a,t){var o=e(t).css("background-image");if((o=o.replace("url(","").replace(")","").replace(/\"/gi,"")).indexOf("?")>0)var s=o.substring(0,o.indexOf("?"));var r="";if("selected"==e(t).attr("state")){r=" selected";var d=s+"?$300BY400$&FIT=CROP,1";e(i).html(e("<img/>",{src:d,alt:""}))}e("<div />").addClass("s7thumbPrint"+r).html(e("<img/>",{src:o,alt:""})).appendTo(l)}),1==e(d).length&&e(r).find(".__PrintScenceySwatches__").remove(),e(".pdp-container").prepend(r)}},20)},generatePrintViewColorways:function(){return!1},generateminicartpopup:function(a){a||(a=e(this.options.selectedColorWay)),e(".Product_detailes_addtocart").removeClass("added_tocart"),e(".Product_detailes_addtocart").addClass("hide");var t=a.data("name"),o=a.data("image"),s=a.data("sku"),r=a.data("colorway");e(".cart_responsiveimage").attr("src",o),e(".cart_item_name").text(t),e(".cart_item_colorway").text(r),e(".cart_item_sku").text(s)},createSoldByText:function(a){if(0==this.options.isLoggedIn)return!1;if(a||(a=e(this.options.selectedPillow)),0==a.length)return console.log("No Selected Colorway Product!"),!1;var t=a.data("uomShort"),o=a.data("uom"),s=a.data("ypr"),r=a.data("cfa").trim().toLowerCase(),i=a.data("website"),l=a.data("categoryName").toLowerCase(),d=e.trim(a.data("qui"));d=+d;var n=a.data("minOrder"),c=d>n?d:n;e("#qty").val(c).change();var p=d>0?"(S)":"",m=n>0?"(S)":"";e(".pdp_logout_text").html(""),e(".product-purchase > p").html(""),e(".minorderval").text(n);var u="",_="";if(d>0||""!=d||null!=d){switch(d){case.25:_='<i style="font-style:normal" class="__decimalIncrementVal">1/4</i>';break;case.5:_='<i style="font-style:normal" class="__decimalIncrementVal">1/2</i>';break;case.75:_='<i style="font-style:normal" class="__decimalIncrementVal">3/4</i>';break;default:_=d}switch(t){case"LY":case"YD":case"RL":u="Sold by the "+o+" in Increments of "+_+" "+o+p+".";break;case"PN":case"ST":u="Sold by the "+o+" in Increments of "+_+" "+o+".";break;case"TL":case"DR":case"EA":u="Sold by the "+o+" in Increments of "+_+" "+o+(p=d>1?"S":"")+".";break;case"M2":u="Sold by the "+o+" in Increments of "+_+" "+o+".";break;case"SF":u="Sold by the "+o+" in Increments of "+_+" SQUARE FEET.";break;default:u="Sold by the "+o+" in Increments of "+_+" "+o+p+"."}e(".pdp_logout_text").append(u),e(".product-purchase > p").append(u)}n&&("SQUARE FOOT"==o?(e(".pdp_logout_text").append("&nbsp;&nbsp;Minimum order "+n+"  SQUARE FEET."),e(".product-purchase > p").append("&nbsp;&nbsp;Minimum order "+n+"  SQUARE FEET.")):(e(".pdp_logout_text").append("&nbsp;&nbsp;Minimum order "+n+"  "+o+m+"."),e(".product-purchase > p").append("&nbsp;&nbsp;Minimum order "+n+"  "+o+m+"."))),s&&(e(".pdp_logout_text").append("<br/>"+s+" Yards per Roll."),e(".product-purchase > p").append("<br/>"+s+" Yards per Roll."));var v=""==u?"":"<br/>";"trimming"!=l&&"wallcovering"!=l&&("r"==r||"requried"==r||"y"==r?e(".pdp_logout_text").append(v+"Cutting For Approval Required."):"a"==r||"available"==r||"Available"==r||"AVAILABLE"==r?e(".pdp_logout_text").append(v+"Cutting For Approval Available."):"n"!=r&&""!=r&&r||e(".pdp_logout_text").append(v+"Cutting For Approval Not Available.")),1==i.length&&1==i[0]?e(".pdp_logout_text").append("<br/>This product is only available for purchase through Scalamandré in the United States."):1==i.length&&2==i[0]&&e(".pdp_logout_text").append("<br/>This product is only available for purchase through Scalamandré in the United Kingdom.")},createSoldByTextinDetailsTable:function(a){if(a||(a=e(this.options.selectedPillow)),0==a.length)return console.log("No Selected Colorway Product!"),!1;var t=a.data("uomShort"),o=a.data("uom"),s=a.data("ypr"),r=e.trim(a.data("qui"));r=+r;var i=a.data("minOrder"),l=r>i?r:i;e("#qty").val(l).change();var d=r>0?"(S)":"",n=i>0?"(S)":"",c="",p="";if(r>0||""!=r||null!=r){switch(r){case.25:p='<i style="font-style:normal" class="__decimalIncrementVal">1/4</i>';break;case.5:p='<i style="font-style:normal" class="__decimalIncrementVal">1/2</i>';break;case.75:p='<i style="font-style:normal" class="__decimalIncrementVal">3/4</i>';break;default:p=r}switch(t){case"LY":case"YD":case"RL":c="Sold by the "+o+" in Increments of "+p+" "+o+d+".";break;case"PN":case"ST":c="Sold by the "+o+" in Increments of "+p+" "+o+".";break;case"TL":case"DR":case"EA":c="Sold by the "+o+" in Increments of "+p+" "+o+(d=r>1?"S":"")+".";break;case"M2":c="Sold by the "+o+" in Increments of "+p+" "+o+".";break;case"SF":c="Sold by the "+o+" in Increments of "+p+" SQUARE FEET.";break;default:c="Sold by the "+o+" in Increments of "+p+" "+o+d+"."}var m=setInterval(function(){if(e(".color-SKU").length>0){if(i){var a="";a="SQUARE FOOT"==o?" Minimum order "+i+"  SQUARE FEET.":" Minimum order "+i+"  "+o+n+"."}var t="";s&&(t=" "+s+" Yards per Roll.")}e(".pdpsoldtext").length<1&&(jQuery("<div>",{class:"pdpsoldtext",style:"display: none;"}).html(c+""+a+t).appendTo(".color-SKU"),clearInterval(m))})}else console.log("qtyUnitIncremetnText: ",p)},createCustomOptions(a){var t=a.data("categoryName"),o=a.data("ccenter"),s=a.data("material");if(a||(a=e(this.options.selectedColorWay)),0==this.options.isLoggedIn)return!1;var r=a.data("customOptions"),i=a.data("cfa").trim();if(0==r.length)return!1;e("#product-options-wrapper").remove();var l=e("<div />",{id:"product-options-wrapper",class:"product-options-wrapper"}),d=e("<div />",{class:"fieldset",tabindex:0});d.appendTo(l),e.each(r,function(a,r){var l=r.id;if("checkbox"==r.type){var n=e("<div />",{class:"field"}).appendTo(d);""!=i&&"N"!=i||n.addClass("hide");var c=e("<div />",{class:"control"}).appendTo(n),p=e("<div />",{class:"options-list nested",id:"options-"+l+"-list"}).appendTo(c);if("Pillows"!=t&&973!=o)var m=e("<div />",{class:"field choice admin__field admin__field-option"}).appendTo(p);var u=e("<input />",{type:"checkbox",class:"checkbox admin__control-checkbox  product-custom-option",name:"options["+l+"][]",id:"options_"+l+"_2",value:l,price:r.price,"data-selector":"options["+l+"]["+l+"]"});"REQUIRED"==i&&e(u).prop("checked",!0),"N"==i&&(e(u).prop("checked",!1),e(n).addClass("disabled")),"REQUIRED"!=i&&"N"!=i||(e(u).prop("readonly",!0),e(u).on("click",function(e){e.preventDefault()})),u.appendTo(m),e("<label/>",{class:"label admin__field-label",for:"options_"+l+"_2",html:"<span>"+r.title+"</span>"}).appendTo(m)}else if("area"==r.type)if("Footwear"==s&&860==o){if("Side Mark"!=r.title){var _=e("<div/>",{class:"field textarea"}).appendTo(d);e("<p/>").html("<span>"+r.title+"</span>").appendTo(_),c=e("<div />",{class:"control"}).appendTo(_),e("<textarea/>",{id:"options_"+l+"_text",class:'"product-custom-option',name:"options["+l+"]","data-selector":"options["+l+"]",cols:20,rows:1,placeholder:"Enter Text Here"}).appendTo(c)}}else _=e("<div/>",{class:"field textarea"}).appendTo(d),e("<p/>").html("<span>"+r.title+"</span>").appendTo(_),c=e("<div />",{class:"control"}).appendTo(_),e("<textarea/>",{id:"options_"+l+"_text",class:'"product-custom-option',name:"options["+l+"]","data-selector":"options["+l+"]",cols:20,rows:1,placeholder:"Enter Text Here"}).appendTo(c);else if("drop_down"==r.type){n=e("<div />",{class:"field hide"}).appendTo(d),c=e("<div />",{class:"control order_type"}).appendTo(n);var v=e("<select />",{name:"options["+l+"]",id:"select_"+l,class:"product-custom-option admin__control-select",title:"","data-selector":"options["+l+"]"}).appendTo(c);e("<option/>",{value:"",text:"-- Please Select --"}).appendTo(v),e.each(r.ddl_options,function(a,t){var o=e("<option/>",{value:t.id,text:t.title,"data-price":t.price}).appendTo(v);"Order"==t.title&&e(o).prop("selected",!0)})}}),e("#section_right_to_center").after(l)},removeHeaderFooter:function(){var a=setInterval(function(){e("#mailtofriend").contents().find("header.page-header").length>0&&(e("#mailtofriend").contents().find("header.page-header").remove(),clearInterval(a))},5),t=setInterval(function(){e("#mailtofriend").contents().find("footer.page-footer").length>0&&(e("#mailtofriend").contents().find("footer.page-footer").remove(),clearInterval(t))},5),o=setInterval(function(){e("#mailtofriend").contents().find(".page-title-wrapper").length>0&&(e("#mailtofriend").contents().find(".page-title-wrapper").remove(),clearInterval(o))},5)},closeEmailToFriendPopUp:function(){var a=setInterval(function(){e("#mailtofriend").contents().find("body.catalog-product-view").length>0&&(e("#mailtofriend").contents().find("html").remove(),e(".__popup_closeBtn__, #__popupCloseButton__ button").click(),clearInterval(a))},5)},changeColorway(a){if(a.parent().hasClass("selected"))return!1;a.data("name");var t=a.data("sku");if(e(this.options.colorWays).removeClass("selected"),a.parent().addClass("selected"),!t)return console.log("Invalid or no SKU found!!!"),!1;this.showMfgrColorPattern()},changePillow(a){a.data("name");var t=a.data("sku");if(e(this.options.sizePillow).removeClass("active"),a.addClass("active"),!t)return console.log("Invalid or no SKU found!!!"),!1;a=e(this.options.currentElm),this.showMfgrPillowPattern()},getProductDetailsFromApi:function(){var a=this,t=e(this.options.selectedColorWay).data("sku");if(!t)return console.log("Invalid or no SKU to get prodcut details!!!"),!1;e.ajax({type:"GET",url:"/apiajax/productdetails",data:{sku:t}}).done(function(e){a.createProductDetailsTable(e)}).error(function(a,t,o){e("#menu_table_data").html(""),e("#menu_table_data_design_inspo").html(""),console.log("getProductDetailsFromApi failed!"),console.log("Request: ",a),console.log("Status: ",t),console.log("Error: ",o)})},getPillowProductDetailsFromApi:function(){var a=this,t=e(this.options.selectedPillow).data("sku");if(!t)return console.log("Invalid or no SKU to get prodcut details!!!"),!1;e.ajax({type:"GET",url:"/apiajax/productdetails",data:{sku:t}}).done(function(e){a.createProductDetailsTable(e)}).error(function(a,t,o){e("#menu_table_data").html(""),e("#menu_table_data_design_inspo").html(""),console.log("getProductDetailsFromApi failed!"),console.log("Request: ",a),console.log("Status: ",t),console.log("Error: ",o)})},createProductDetailsTable:function(a){var t=e.parseJSON(a).data,o="",s="",r=e(this.options.selectedColorWay),i=e(this.options.selectedPillow),l=r.data("material"),d=r.data("inspiration"),n=r.data("costcenter"),c=r.data("ccenter"),p=i.data("ccenter"),m=r.data("categoryName"),u=i.data("categoryName");if(d="Pillows"==u||973==p?i.data("inspiration"):r.data("inspiration"),971!=n&&971!=p||e(".design-inspo-accord").hide(),""==d&&(console.log("design Info Empty",d),e(".design-inspo-accord").hide()),"Pillows"!=m&&"Pillows"!=u&&d&&(s+=973==n||973==p||973==c?'<div class="__ks_scala_pdp_atrr__ hideshowdesigninspirationforpillows" class="__ks_mobileDesignTextWrap__"><div>WHAT MAKES THIS DOG BED SPECIAL</div><div>'+d+"</div></div>":'<div class="__ks_scala_pdp_atrr__ hideshowdesigninspiration" class="__ks_mobileDesignTextWrap__"><div id="inspirationreplace" style="color: #000;max-width: 100% !important;">'+d+"</div></div>",setTimeout(function(){let e=document.getElementById("inspirationreplace").innerHTML;document.getElementById("inspirationreplace").innerHTML=e.replace("CO.DE Grounds Collection","<a href='/search/results/category?COLLECTION=Co.De+Grounds'/>CO.DE Grounds Collection</a>");let a=document.getElementById("inspirationreplace").innerHTML;document.getElementById("inspirationreplace").innerHTML=a.replace("CO.DE Grand Tour Collection","<a href='/search/results/category?COLLECTION=Co.De+Grand+Tour'/>CO.DE Grand Tour Collection</a>");let t=document.getElementById("inspirationreplace").innerHTML;document.getElementById("inspirationreplace").innerHTML=t.replace("CO.DE GROUNDS COLLECTION","<a href='/search/results/category?COLLECTION=Co.De+Grounds'/>CO.DE GROUNDS COLLECTION</a>");let o=document.getElementById("inspirationreplace").innerHTML;document.getElementById("inspirationreplace").innerHTML=o.replace("CO.DE GRAND TOUR COLLECTION","<a href='/search/results/category?COLLECTION=Co.De+Grand+Tour'/>CO.DE GRAND TOUR COLLECTION</a>"),jQuery(".hideshowdesigninspiration").each(function(){jQuery(this).html(jQuery(this).html().replace(/&nbsp;/gi," "))})},500)),e("#menu_table_data_design_inspo").html(""),e("#menu_table_data_design_inspo").html(s),"Pillows"!=m&&"Pillows"!=u||(d&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowdesigninspirationforpillows" class="__ks_mobileDesignTextWrap__"><div id="inspirationreplace" style="color: #000;max-width: 100% !important;">WHAT MAKES THIS PILLOW SPECIAL</div><div>'+d+"</div></div>"),o+='<div class="__ks_scala_pdp_atrr__ hideshowdesigninspiration" class="__ks_mobileDesignTextWrap__"><div>LEAD TIME</div><div> '+(t[0].LEAD_TIME?t[0].LEAD_TIME:"3-5 DAYS")+" </div></div>"),"Pillows"!=m&&"Pillows"!=u&&"Lamps"!=l&&"Wall Lights"!=l&&"Floor Lamps"!=l&&"Table Lamps"!=l&&"Lampshades"!=l){var _=parseFloat(2.54*t[0].MATERIAL_WIDTH.replace(/\"/g,""));_=(_=(_=_<=0?0:_)==parseInt(_)?parseInt(_):_).toFixed(2),973==n||973==c?"Y"==t[0].WIDE_WIDTH?o+='<div class="__ks_scala_pdp_atrr__ hideshowapproxwidth"><div>DIMENSIONS</div><div><div><span>'+t[0].MATERIAL_WIDTH+'</span><span class="inchbycm">/</span><span class="valueincm">'+_+" cm</span></div><div> WIDE WIDTH</div></div></div>":_>0&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowapproxwidth"><div>DIMENSIONS</div><div><div><span>'+t[0].MATERIAL_WIDTH+'</span><span class="inchbycm">/</span><span class="valueincm">'+_+" cm</span></div></div></div>"):"Y"==t[0].WIDE_WIDTH?o+='<div class="__ks_scala_pdp_atrr__ hideshowapproxwidth"><div>APPROX. MATERIAL WIDTH</div><div><div><span>'+t[0].MATERIAL_WIDTH+'</span><span class="inchbycm">/</span><span class="valueincm">'+_+" cm</span></div><div> WIDE WIDTH</div></div></div>":_>0&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowapproxwidth"><div>APPROX. MATERIAL WIDTH</div><div><div><span>'+t[0].MATERIAL_WIDTH+'</span><span class="inchbycm">/</span><span class="valueincm">'+_+" cm</span></div></div></div>"),"T"==t[0].TRIM?o+='<div class="__ks_scala_pdp_atrr__ hideshowtrimmed"><div></div><div><p>TRIMMED</p></div></div>':"U"==t[0].TRIM&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowuntrimmed"><div></div><div><p>UNTRIMMED</p></div></div>');var v=parseFloat(2.54*t[0].PATTERN_REPEAT_LENGTH.replace(/\"/g,""));v=(v=(v=v==parseInt(v)?parseInt(v):v).toFixed(2))<=0?0:v;var h=parseFloat(2.54*t[0].PATTERN_REPEAT_WIDTH.replace(/\"/g,""));h=(h=(h=h==parseInt(h)?parseInt(h):h).toFixed(2))<=0?0:h;var y=e.trim(t[0].PATTERN_REPEAT_WIDTH),f=e.trim(t[0].PATTERN_REPEAT_LENGTH);null!=y&&null!=f&&""!=y&&""!=f&&null!=y&&null!=f||console.log("PRW or PRL is missing"),973!=n&&973!=c&&(h>=0||v>=0?(y||f)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowapproxrepeat"><div>APPROX. REPEAT</div><div>',y&&(o+="<div><span>HORIZONTAL "+y+'</span><span class="inchbycm">/</span><span class="valueincm">'+h+" cm</span></div>"),f&&(o+="<div><span>VERTICAL "+f+'</span><span class="inchbycm">/</span><span class="valueincm"> '+v+" cm</span></div>"),o+="</div></div>"):e(".__ks_scala_pdp_atrr__.hideshowapproxrepeat").hide(),"NONE"!=e.trim(t[0].MATCH_TYPE)&&""!=e.trim(t[0].MATCH_TYPE)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowmatch"><div>MATCH</div><div>'+t[0].MATCH_TYPE+"</div></div>"))}var w=t[0].FIBER_CONTENT.replace(/\|/g,"<br />");if(e.trim(w)||e.trim(t[0].GROUND_MATERIAL)){var g=t[0].GROUND_MATERIAL.replace(/\|/g,"<br />");o+="Pillows"==m||"Pillows"==u?'<div class="__ks_scala_pdp_atrr__ hideshowcontent"><div>FIBER CONTENT</div><div>'+w+" "+g+"</div></div>":973==n||973==p||973==c?'<div class="__ks_scala_pdp_atrr__ hideshowcontent"><div>COVER CONTENT</div><div>'+w+" "+g+"</div></div>":"Lamps"==l||"Floor Lamps"==l||"Wall Lights"==l||"Table Lamps"==l||"Lampshades"==l?'<div class="__ks_scala_pdp_atrr__ hideshowcontent"><div>CONSTRUCTION</div><div>'+w+" "+g+"</div></div>":'<div class="__ks_scala_pdp_atrr__ hideshowcontent"><div>CONTENT</div><div>'+w+" "+g+"</div></div>"}if(e.trim(t[0].VELVET_PILE_CONTENT)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowvelvetpile"><div>VELVET PILE CONTENT</div><div>'+t[0].VELVET_PILE_CONTENT.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].EMBROIDERY_MATERIAL_CONTENT)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowembroidery"><div>EMBROIDERY CONTENT</div><div>'+t[0].EMBROIDERY_MATERIAL_CONTENT.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].FABRIC_FINISH)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowfabricfinish"><div>FINISH</div><div>'+t[0].FABRIC_FINISH.replace(/\|/g,"<br />")+"</div></div>"),"Pillows"!=m&&"Pillows"!=u&&973!=n&&973!=p&&973!=c&&"Lamps"!=l&&"Lampshades"!=l&&"Wall Lights"!=l&&"Floor Lamps"!=l&&"Table Lamps"!=l){"Y"==t[0].REVERSIBLE&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowreversible"><div></div><div><p>REVERSIBLE</p></div></div>'),"Y"==t[0].RAILROADED&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowrailroaded"><span></span><p>THIS PATTERN CAN BE RAILROADED</p></div>'),e.trim(t[0].FINISH)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowfinish"><div>FINISH</div><div>'+t[0].FINISH.replace(/\|/g,"<br />")+"</div></div>");var T=e(".pdpsoldtext").text();switch(e(".soldtextpdp").length<=1&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowpatternalerts soldtextpdp"><div></div><div style="text-transform: uppercase;">'+T+"</div></div>"),e.trim(t[0].PATTERNALERTS)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowpatternalerts"><div></div><div>'+(C=t[0].PATTERNALERTS.replace(/\|/g,"<br />"))+"</div></div>"),e.trim(t[0].WEARCODE).toUpperCase()){case"M":t[0].WEARCODE="MULTIPURPOSE";break;case"D":t[0].WEARCODE="DRAPERY";break;case"U":t[0].WEARCODE="UPHOLSTERY";break;case"S":t[0].WEARCODE="SHEER"}if((e.trim(t[0].END_USE_QUALITY)||e.trim(t[0].WEARCODE))&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowsuggesteduse"><div>SUGGESTED USE</div><div>'+t[0].END_USE_QUALITY.replace(/\|/g,"<br />")+" "+t[0].WEARCODE.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].WEBCONTPRF)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowperformancecontract"><div>PERFORMANCE / CONTRACT</div><div>'+t[0].WEBCONTPRF.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].WEARCODEDESC)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowabrasion"><div>ABRASION</div><div>'+t[0].WEARCODEDESC.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].FIRECODES)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowfirecode"><div>FIRECODE</div><div>'+t[0].FIRECODES.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].WASHABILITY),e.trim(t[0].LIGHTFAST)){var b=t[0].LIGHTFAST.replace(/\|/g,"<br />");o+='<div class="__ks_scala_pdp_atrr__ hideshowlightfastness"><div >LIGHT FASTNESS<a href="/faq#lightfastness"><img src=" '+this.waterquestionmarkimage+' "></a></div><div>'+b+"</div></div>"}}if("Lamps"!=l&&"Floor Lamps"!=l&&"Wall Lights"!=l&&"Table Lamps"!=l||(e.trim(t[0].FINISH)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowfinish"><div>FINISH</div><div>'+t[0].FINISH.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].LIGHTFAST)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowlightfastness"><div>BULB</div><div>'+(b=t[0].LIGHTFAST.replace(/\|/g,"<br />"))+"</div></div>")),"Pillows"!=m&&"Pillows"!=u&&973!=n&&973!=p&&973!=c&&"Lamps"!=l&&"Wall Lights"!=l&&"Floor Lamps"!=l&&"Table Lamps"!=l&&(e.trim(t[0].MATERIALTYPEQUALITY)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowtype"><div>TYPE</div><div>'+t[0].MATERIALTYPEQUALITY.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].COLOR_ATTRIBUTE)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowcolorattributes"><div>COLOR ATTRIBUTES</div><div>'+t[0].COLOR_ATTRIBUTE.replace(/\|/g,"<br />")+"</div></div>"),e.trim(t[0].SCALE)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowscale"><div>SCALE</div><div>'+t[0].SCALE.replace(/\|/g,"<br />")+"</div></div>"),"LY"==t[0].CADPRICUM||"YD"==t[0].CADPRICUM?t[0].CADPRICUM="YARD":"RL"==t[0].CADPRICUM?t[0].CADPRICUM="ROLL":"PN"==t[0].CADPRICUM?t[0].CADPRICUM="PANEL":"ST"==t[0].CADPRICUM?t[0].CADPRICUM="SET":"TL"==t[0].CADPRICUM?t[0].CADPRICUM="TILE":"DR"==t[0].CADPRICUM?t[0].CADPRICUM="DOUBLE ROLL":"EA"==t[0].CADPRICUM?t[0].CADPRICUM="PIECE":"M2"==t[0].CADPRICUM?t[0].CADPRICUM="SQUARE METER":"RP"==t[0].CADPRICUM?t[0].CADPRICUM="REPEAT":"SF"==t[0].CADPRICUM&&(t[0].CADPRICUM="SQUARE FOOT"),1==this.options.isLoggedIn&&e.trim(t[0].CADLOGGEDINPRICE)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowcanadianprice"><div>CANADIAN PRICE</div><div>CAD $'+parseFloat(t[0].CADLOGGEDINPRICE).toFixed(2)+" PER "+t[0].CADPRICUM+"</div></div>")),e.trim(t[0].PATTERNALERTS)){var C=t[0].PATTERNALERTS.replace(/\|/g,"<br />");"Lampshades"==l?o+='<div class="__ks_scala_pdp_atrr__ hideshowpatternalerts"><div>SPECS</div><div>'+C+"</div></div>":"Pillows"!=m&&"Pillows"!=u&&973!=n&&973!=p&&973!=c&&"Lamps"!=l&&"Floor Lamps"!=l&&"Wall Lights"!=l&&"Table Lamps"!=l||(o+='<div class="__ks_scala_pdp_atrr__ hideshowpatternalerts"><div></div><div>'+C+"</div></div>")}if("Lamps"!=l&&"Floor Lamps"!=l&&"Wall Lights"!=l&&"Table Lamps"!=l||e.trim(t[0].COORDINATING_FABRICS)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowcleanability"><div>LAMPSHADE STYLES</div><div>'+t[0].COORDINATING_FABRICS.replace(/\|/g,"<br />")+"</div></div>"),"Lamps"==l&&"Floor Lamps"==l&&"Wall Lights"==l&&"Table Lamps"==l||e.trim(t[0].CLEANABILITY)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowcleanability"><div>CLEANABILITY</div><div>'+t[0].CLEANABILITY.replace(/\|/g,"<br />")+"</div></div>"),"Pillows"!=m&&"Pillows"!=u||e.trim(t[0].ORDER_UM)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowcleanability"><div>DIMENSIONS</div><div>'+t[0].ORDER_UM.replace(/\|/g,"<br />")+"</div></div>"),"Pillows"==m&&"Pillows"==u||973==n&&973==p?o+='<div class="__ks_scala_pdp_atrr__ hideshowmadein"><div>MADE IN</div><div>USA</div></div>':e.trim(t[0].COUNTRYOFORIGIN)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowmadein"><div>MADE IN</div><div>'+t[0].COUNTRYOFORIGIN.replace(/\|/g,"<br />")+"</div></div>"),"Pillows"!=m&&"Pillows"!=u&&e.trim(t[0].WHERE_STOCKED)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowstockedin"><div>STOCKED IN</div><div>'+t[0].WHERE_STOCKED.replace(/\|/g,"<br />")+"</div></div>"),973!=n&&973!=p&&973!=c||(o+='<div class="__ks_scala_pdp_atrr__ hideshowdesigninspiration" class="__ks_mobileDesignTextWrap__"><div>LEAD TIME</div><div> 5 BUSINESS DAYS </div></div>'),"Lamps"!=l&&"Floor Lamps"!=l&&"Wall Lights"!=l&&"Table Lamps"!=l||"NONE"!=e.trim(t[0].MATCH_TYPE)&&""!=e.trim(t[0].MATCH_TYPE)&&(o+='<div class="__ks_scala_pdp_atrr__ hideshowmatch"><div>MATCH</div><div>'+t[0].MATCH_TYPE+"</div></div>"),("Lamps"!=l||"Floor Lamps"!=l||"Wall Lights"!=l||"Table Lamps"!=l)&&(e.trim(t[0].THEMESTYLEDESIGNTYPE)||e.trim(t[0].THEMESTYLEDESIGN_TYPE))){var I=(t[0].THEMESTYLEDESIGNTYPE?t[0].THEMESTYLEDESIGNTYPE:e.trim(t[0].THEMESTYLEDESIGN_TYPE)).toLowerCase().split(/[|]+/);o+='<div id="hideshowdesign" class="__ks_scala_pdp_atrr__ hideshowdesign"><div>DESIGN</div><div id="designvalue"></div></div>';var k,E="";for(k=0;k<I.length;k++)E+='<a href="/search/results/category?design='+I[k].replace(" / ","-").replace(" ","-")+'">'+I[k].toUpperCase()+"</a>";var S=setInterval(function(){document.getElementById("designvalue").innerHTML=E,clearInterval(S)},5)}var P=e.trim(t[0].STOCKINVENTORY).toUpperCase();e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").attr("data-stock-inventory",P),"N"!=P&&"Y"!=P||e("#custom_add_to_cart").prop("disabled",!1),"N"==P&&e("#custom_reserve_to_cart span").text("RESERVE"),e("#menu_table_data").html(""),e("#menu_table_data").html(o)},showScene7ImageViewer:function(){var a=e(this.options.selectedColorWay).data("scence7sku");if(e("#s7viewer").html(""),!a)return console.log("Invalid or no SKU to show scene7 image viewer!!!"),!1;new s7viewers.MixedMediaViewer({containerId:"s7viewer",params:{asset:"starkcarpet/"+a+"_SET",serverurl:"https://s7d2.scene7.com/is/image/"}}).init(),this.createDownloadMainImageButton()},showScene7ImageViewerpillows:function(a){if(a||(a=e(this.options.selectedPillow).data("scence7sku")),e("#s7viewer").html(""),!a)return console.log("Invalid or no SKU to show scene7 image viewer!!!"),!1;new s7viewers.MixedMediaViewer({containerId:"s7viewer",params:{asset:"starkcarpet/"+a+"_SET",serverurl:"https://s7d2.scene7.com/is/image/"}}).init(),this.createDownloadMainImageButton()},createDownloadMainImageButton:function(){var a=this,t=setInterval(function(){var o=e(".s7thumbcell");if(o.length>0){clearInterval(t);var s=setInterval(function(){var t=e("#s7viewer_container_inner");if(t.length>0){clearInterval(s);var r=e("<a/>",{href:"javascript:void(0);",class:"download-main-image","data-button":"download-main-image"});1==o.length&&r.css({bottom:"-2em"}),e("<span />").html("Download").appendTo(r);var i=e("<span />").addClass("main-image-download-progress").appendTo(r);e("<img />",{src:a.busyImage,alt:"Loading Image"}).appendTo(i),r.appendTo(t),setTimeout(function(){a.generatePrintViewImage()},500)}},10)}},10)},getMainImageLinkAnddownloadMainImage:function(){var a=e(".s7thumbcell .s7thumb");if(e(a).length>1)return this.downloadImageSet(),!1;var t=e('.s7thumbcell .s7thumb[state="selected"]');if(t.length>0){var o=e(t).css("background-image");if((o=o.replace("url(","").replace(")","").replace(/\"/gi,"")).indexOf("?")>0){var s=o.substring(0,o.indexOf("?")),r=s+"?$scalamandre-1125-1500$&fit=constrain",i=s.split("/"),l=i[i.length-1];this.downloadImage(r,l)}}},downloadImage:function(a,t){var o=this;e(".main-image-download-progress").css({visibility:"visible"});var s=new XMLHttpRequest;s.open("GET",a,!0),s.responseType="blob",s.send(),s.onload=function(){o.saveAs(this.response,t),e(".main-image-download-progress").css({visibility:"hidden"})}},downloadImageSet:function(){var a=this,s=e("h1.page-title span").text()+" "+e(".color-SKU .color").text();s=s.replace(" ","_"),s+=".zip";var r=new t,i=e(".s7thumbcell .s7thumb");if(e(i).length>0){e(".main-image-download-progress").css({visibility:"visible"});var l=0;e.each(i,function(t,d){var n=e(d).css("background-image");if((n=n.replace("url(","").replace(")","").replace(/\"/gi,"")).indexOf("?")>0){var c=n.substring(0,n.indexOf("?")),p=c+"?$scalamandre-1125-1500$&fit=constrain",m=c.split("/"),u=m[m.length-1];o.getBinaryContent(p,function(t,o){if(t)throw console.log("getBinaryContent Error: ",t),t;l++,r.file(u+".jpg",o,{binary:!0}),l==e(i).length&&r.generateAsync({type:"blob"}).then(function(t){a.saveAs(t,s),e(".main-image-download-progress").css({visibility:"hidden"})})})}})}},saveAs:function(e,a){var t=(window.URL||window.webkitURL).createObjectURL(e),o=document.createElement("a");o.href=t,o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o)},rebuildUrl:function(a){if(a||(a=e(this.options.selectedColorWay).data("sku")),!a)return!1;for(var t,o={},s=location.search.substring(1),r=/([^&=]+)=([^&]*)/g;t=r.exec(s);)o[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);a&&(o.c=a.toUpperCase());var i=e.param(o);history.pushState({},null,"?"+decodeURIComponent(i))},updateSkuOfApiInvetoryData:function(){e(this.options.selectedColorWay)},resizeInputqty:function(){var e=jQuery("input#qty"),a=e.val().length;e.css("width","55px"),a>6&&e.css("width",10*(a+1)+"px")},getInventoryFromApi:function(){var a=this;if(0==this.options.isLoggedIn)return!1;var t=e(this.options.selectedColorWay),o=t.data("sku"),s=window.location.origin+"/syncorder/inventory",r="No",i=t.data("abccode"),l=t.data("ccenter");e("#custom_add_to_cart").prop("disabled",!0);var d=[],n=t.data("brand"),c=t.data("ccenter");if(d.selectedProdBrand=n,d.selectedProdCostcenter=c,"R"==i&&l>=600&&l<=799&&(r="Yes"),("Lelièvre"==n||"Jean Paul Gaultier"==n&&725==c||"Jean Paul Gaultier"==n&&631==c||"Tassinari & Châtel"==n&&629==c)&&"Yes"!=r){var p=e(".swatch-attribute.swatch-layered").data("lelieverMappingEndpoint");e.ajax({url:p,type:"POST",data:{itemid:o},dataType:"json",success:function(t){var o=t.Lelievre_Mapping,s=Object.keys(o).length;if(0==s){e(".section-right").css("display","none"),e("#qty").css("width","55px");var r=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("qui"),i=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("minOrder");i=(i=r>i?r:i)>0?i:1,e("#qty").attr("value",i)}if(!(s>0))return e(".stock.available").hide(),e(".stock.unavailable").show(),!1;var l=e.trim(t.Lelievre_Mapping[0].PATTERN),n=e.trim(t.Lelievre_Mapping[0].COLOR);d.RequestData={PRODUCTS:[{NOPAT:l,NOCOL:n}]},d.RequestData=d.RequestData,d.RequestUrl=window.location.origin+"/apis/index/leliever/",d.RequestMethod="POST",d.DataType="json",a.NewinventoryMainRequest(d)},error:function(e,a,t){console.log("Leliever Mapping failed!"),console.log("Leliever Request: ",e),console.log("Leliever Status: ",a),console.log("Leliever Error: ",t)}})}else if("Alhambra"==n&&"Yes"!=r){var m=e(".swatch-attribute.swatch-layered").data("alahambraMappingEndpoint");e.ajax({url:m,type:"POST",data:{itemid:o},dataType:"json",success:function(t){var o=t.Alhambra_Mapping;if(!(Object.keys(o).length>0))return e(".stock.available").hide(),e(".stock.unavailable").show(),!1;var s=t.Alhambra_Mapping[0].ATTRIBUTEVALUE;d.RequestData={alahambra_mapping_sku:e.trim(s)},d.RequestUrl=window.location.origin+"/apis/index/alahambra/",d.RequestMethod="POST",d.DataType="json",a.NewinventoryMainRequest(d)},error:function(e,a,t){console.log("Alahambra Mapping failed!"),console.log("Alahambra Request: ",e),console.log("Alahambra Status: ",a),console.log("Alahambra Error: ",t)}})}else d.RequestData={itemid:o},d.RequestUrl=s,d.RequestMethod="GET",d.DataType="json",a.NewinventoryMainRequest(d)},inventoryMainRequest:function(a){var t=this,o=0,s=!1;e.ajax({url:a.RequestUrl,type:a.RequestMethod,data:a.RequestData,dataType:a.DataType,headers:a.Header,beforeSend:function(a){e("span.__ks_dyeLotText__").remove(),e("#inventoryQty").html('<img src= "'+t.busyImage+'" alt="Loading Inventory"/> <span class="__ks_dyeLotText__" title="Checking Stock / Dye Lot">Checking Stock / Dye Lot</span>'),e(".final-uom-value-label").hide()},success:function(r){if(r.error)console.log("Result: ",r);else{var i=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("abccode"),l=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("ccenter"),d="No";if("R"==i&&l>=600&&l<=799&&(d="Yes"),("Lelièvre"==a.selectedProdBrand||"Jean Paul Gaultier"==a.selectedProdBrand&&725==a.selectedProdCostcenter||"Jean Paul Gaultier"==a.selectedProdBrand&&631==a.selectedProdCostcenter||"Tassinari & Châtel"==a.selectedProdBrand&&629==a.selectedProdCostcenter)&&"Yes"!=d){console.log("leliver result: ",r);var n=JSON.parse(r.data);if(n=n[0].stock)for(var c=0;c<n.length;c++)parseFloat(n[c].metrs.trim())&&(o+=parseFloat(n[c].metrs.trim()))}else if("Alhambra"==a.selectedProdBrand&&"Yes"!=d){var p=JSON.parse(r.data);for(c=0;c<p.length;c++)parseFloat(p[c].stock.trim())&&(o+=parseFloat(p[c].stock.trim()))}else for(c=0;c<r.length;c++)parseFloat(r[c].AVAIL.trim())&&(o+=parseFloat(r[c].AVAIL.trim()))}if(e("#inventoryQty").text(o.toFixed(2)),e(".final-uom-value-label").show(),o>1){if("EACH"!=e.trim(e(".final-uom").text()).toUpperCase()){var m=e(".final-uom").text();m=m.replace("(s)",""),e(".final-uom").text(m+"(s)")}var u=!0}o>0?(e("#custom_add_to_cart").prop("disabled",!1),e(".stock.unavailable").hide(),e(".stock.available").show(),e(".dye-lot-accordion").show(),("Lelièvre"==a.selectedProdBrand||"Alhambra"==a.selectedProdBrand||"Aldeco"==a.selectedProdBrand||"Jean Paul Gaultier"==a.selectedProdBrand&&725==a.selectedProdCostcenter||"Jean Paul Gaultier"==a.selectedProdBrand&&631==a.selectedProdCostcenter||"Tassinari & Châtel"==a.selectedProdBrand&&629==a.selectedProdCostcenter)&&"Yes"!=d&&(s=!0)):(e(".stock.available").hide(),e(".stock.unavailable").show(),e(".dye-lot-accordion").hide()),o<1&&e(".stock.available").hide();var _=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("stockInventory");"N"!=_&&"Y"!=_||e("#custom_add_to_cart").prop("disabled",!1),"N"==_&&e("#custom_reserve_to_cart span").text("RESERVE"),setTimeout(function(){if(e("span.__ks_dyeLotText__").remove(),"Y"==_||s||u){var a=e("<a />",{class:"__ks_dyeLotLink__",href:"javascript:void(0);",text:"Dye Lots"}),t=e("<span/>",{title:"Dye Lots",class:"__ks_dyeLotText__ _dyeLotInfo",html:a});e("#inventoryQty").parent().append(t)}},1e3),t.resizeInputqty()},error:function(e,a,t){console.log("getInventoryFromApi failed!"),console.log("Request: ",e),console.log("Status: ",a),console.log("Error: ",t)}})},NewinventoryMainRequest:function(a){var t=this,o=0,s=!1,r="";e.ajax({url:a.RequestUrl,type:a.RequestMethod,data:a.RequestData,dataType:a.DataType,headers:a.Header,beforeSend:function(a){e("span.__ks_dyeLotText__").remove(),e("#inventoryQty").html('<img src= "'+t.busyImage+'" alt="Loading Inventory"/> <span class="__ks_dyeLotText__" title="Checking Stock / Dye Lot">Checking Stock / Dye Lot</span>'),e(".final-uom-value-label").hide()},success:function(i){e("body").trigger("processStop");var l="",d=1;if(i.error){console.log("Result: ",i),e(".product-add-form #inventory-data").find("tbody").html(l),e("#inventoryQty").text(o.toFixed(2)),e("#custom-pagination").html(""),Number(i.length)>12&&d>=2&&e("#custom-pagination").pagination({items:d,currentPage:1,prevText:"PREV",nextText:"NEXT",displayedPages:3,cssStyle:"light-theme",onInit:function(){e(".product-add-form #inventory-data .hide-tackle").hide(),e(".product-add-form #inventory-data .show-tackle-1").show()},onPageClick:function(a,t){return e(".product-add-form #inventory-data .hide-tackle").hide(),e(".product-add-form #inventory-data .show-tackle-"+a).show(),!1}}),e(window).outerWidth()<=767&&(e(".section-right #apiInvetoryData").appendTo("#section_right_to_center"),e(".section-right .product-add-form").appendTo("#section_right_to_center")),I=(I=(C=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("qui"))>(I=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("minOrder"))?C:I)>0?I:1;var n=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("ccenter"),c=e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("categoryName"),p=e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("material");if(e("div").hasClass("pillowpopup")&&"Pillows"==c||e("div").hasClass("pillowpopup")&&973==n||e("div").hasClass("pillowpopup")&&"Footwear"==p)var m=parseFloat(e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("price"));else m=parseFloat(e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("price")),isNaN(m)&&(m=parseFloat(e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("price")));e("#qty").attr("value",I),0==o&&(e("#apiInvetoryData").hide(),"Pillows"==c||973==n||"Footwear"==p||"umbrellas"==p||865==n||830==n?e(".product-add-form").css("display","none"):e(".product-add-form #inventory-data").find("tbody").html('<tr><td class="__ks_orderPopup_notStockedText__"><span>This item is not stocked in our distribution center.</span><span>If you wish to place an order now please proceed with checkout and Customer Service will advise availability of current stock level in 24-48hrs.</span><span>If you wish to strictly check stock, please contact Customer Service by emailing: <a href="mailto:customerservice@scalamandre.com" style="">customerservice@scalamandre.com</a> or calling <a href="tel:+18009324361">800-932-4361</a>.</span></td></tr>')),t.resizeInputqty()}else{e("#apiInvetoryData").show();var u=e.trim(e(".final-uom").text()).toUpperCase();"EACH"!=u&&(u=(u=e(".final-uom").text()).replace("(s)",""),u+="s");var _=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("abccode"),v=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("ccenter"),h="No";if("R"==_&&v>=600&&v<=799&&(h="Yes"),("Lelièvre"==a.selectedProdBrand||"Jean Paul Gaultier"==a.selectedProdBrand&&725==a.selectedProdCostcenter||"Jean Paul Gaultier"==a.selectedProdBrand&&631==a.selectedProdCostcenter||"Tassinari & Châtel"==a.selectedProdBrand&&629==a.selectedProdCostcenter)&&"Yes"!=h){console.log("leliver result: ",i);var y=JSON.parse(i.data);if(y=y[0].stock)for(var f=0;f<y.length;f++)parseFloat(y[f].metrs.trim())&&(o+=parseFloat(y[f].metrs.trim()),r=""==(r=e.trim(y[f].nbain))||null==r?"":r,l+='<tr class="hide-tackle show-tackle-'+d+'"><td class="inventory-item-qty">'+e.trim(y[f].metrs)+" "+u+' </td><td class="inventory-item-serial">'+r+"</td></tr>",(f+1)%12==0&&d++)}else if("Alhambra"==a.selectedProdBrand&&"Yes"!=h){var w=JSON.parse(i.data);for(f=0;f<w.length;f++)parseFloat(w[f].stock.trim())&&(o+=parseFloat(w[f].stock.trim()),r=""==(r=e.trim(w[f].dyelot))||null==r?"":r,l+='<tr class="hide-tackle show-tackle-'+d+'"><td class="inventory-item-qty">'+e.trim(w[f].stock)+" "+u+' </td><td class="inventory-item-serial">'+r+"</td></tr>",(f+1)%12==0&&d++)}else for(f=0;f<i.length;f++)if(parseFloat(i[f].AVAIL.trim())){if(o+=parseFloat(i[f].AVAIL.trim()),r=""==(r=e.trim(i[f].SHADE))||null==r||null==r?"":r,l+='<tr class="hide-tackle show-tackle-'+d+'"><td class="inventory-item-qty pdp-dyelot">'+e.trim(i[f].AVAIL)+"  "+u+' </td><td class="inventory-item-serial pdp-dyelot">#'+e.trim(i[f].SERIALNO)+'</td><td class="inventory-item-serial pdp-dyelot">'+r+"</td></tr>",(f+1)%12==0&&d++,i[f].STOCK_LOCATION){e(".stockloaction").html("");var g="Stocked in "+i[f].STOCK_LOCATION;e(".stockloaction").append(g)}e(l).length>10?e(".inventory-data-pdp").addClass("add-scroll"):e(".inventory-data-pdp").removeClass("add-scroll")}t.resizeInputqty()}if(e(".product-add-form #inventory-data").find("tbody").html(l),e("#inventoryQty").text(o.toFixed(2)),e(".final-uom-value-label").show(),o>1){if("EACH"!=e.trim(e(".final-uom").text()).toUpperCase()){var T=e(".final-uom").text();T=T.replace("(s)",""),e(".final-uom").text(T+"(s)")}var b=!0}o>0?(e("#custom_add_to_cart").prop("disabled",!1),e(".stock.unavailable").hide(),e(".stock.available").show(),e(".dye-lot-accordion").show(),("Lelièvre"==a.selectedProdBrand||"Alhambra"==a.selectedProdBrand||"Aldeco"==a.selectedProdBrand||"Jean Paul Gaultier"==a.selectedProdBrand&&725==a.selectedProdCostcenter||"Jean Paul Gaultier"==a.selectedProdBrand&&631==a.selectedProdCostcenter||"Tassinari & Châtel"==a.selectedProdBrand&&629==a.selectedProdCostcenter)&&"Yes"!=h&&(s=!0)):(e(".stock.available").hide(),e(".stock.unavailable").show(),e(".dye-lot-accordion").hide()),o<1&&(e(".stock.available").hide(),e(".section-right").css("display","none"));var C,I,k=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("stockInventory");"N"!=k&&"Y"!=k||e("#custom_add_to_cart").prop("disabled",!1),"N"==k&&e("#custom_reserve_to_cart span").text("RESERVE"),setTimeout(function(){if(e("span.__ks_dyeLotText__").remove(),"Y"==k||s||b){var a=e("<a />",{class:"__ks_dyeLotLink__",href:"javascript:void(0);",text:"Dye Lots"}),t=e("<span/>",{title:"Dye Lots",class:"__ks_dyeLotText__ _dyeLotInfo",html:a});e("#inventoryQty").parent().append(t)}},1e3),i&&Number(i.length)>12&&d>=2&&e("#custom-pagination").pagination({items:d,currentPage:1,prevText:"PREV",nextText:"NEXT",displayedPages:3,cssStyle:"light-theme",onInit:function(){e(".product-add-form #inventory-data .hide-tackle").hide(),e(".product-add-form #inventory-data .show-tackle-1").show()},onPageClick:function(a,t){return e(".product-add-form #inventory-data .hide-tackle").hide(),e(".product-add-form #inventory-data .show-tackle-"+a).show(),!1}}),e(window).outerWidth()<=767&&(e(".section-right #apiInvetoryData").appendTo("#section_right_to_center"),e(".section-right .product-add-form").appendTo("#section_right_to_center")),I=(I=(C=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("qui"))>(I=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("minOrder"))?C:I)>0?I:1,c=e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("categoryName"),n=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("ccenter"),p=e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("material"),e("div").hasClass("pillowpopup")&&"Pillows"==c||e("div").hasClass("pillowpopup")&&973==n||e("div").hasClass("pillowpopup")&&"Footwear"==p?m=parseFloat(e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("price")):(m=parseFloat(e(".custom-colorways-wrapper.selected a.swatch-option-link-layered").data("price")),isNaN(m)&&(m=parseFloat(e(".custom-colorways-wrappers.selected a.swatch-option-link-layered").data("price")))),e("#qty").attr("value",I),0==o&&(e("#apiInvetoryData").hide(),"Pillows"==c||973==n||"Footwear"==p||"umbrellas"==p?e(".product-add-form").css("display","none"):e(".product-add-form #inventory-data").find("tbody").html('<tr><td class="__ks_orderPopup_notStockedText__"><span>This item is not stocked in our distribution center.</span><span>If you wish to place an order now please proceed with checkout and Customer Service will advise availability of current stock level in 24-48hrs.</span><span>If you wish to strictly check stock, please contact Customer Service by emailing: <a href="mailto:customerservice@scalamandre.com" style="">customerservice@scalamandre.com</a> or calling <a href="tel:+18009324361">800-932-4361</a>.</span></td></tr>'))},error:function(e,a,t){console.log("getInventoryFromApi failed!"),console.log("Request: ",e),console.log("Status: ",a),console.log("Error: ",t)}})},getYouMightAlosLikeCol:function(){var a=this,t=e(this.options.selectedColorWay).data("sku");let o=a.options.apiUrlYouMightAlsoLike;e.ajax({url:o,type:"POST",data:{itemid:t},dataType:"json",beforeSend:function(){e(".block.related ul").html('<img src= "'+a.busyImage+'" alt="Loading Inventory"/>')},success:function(e){a.generateProductCards(e.Products)},error:function(e,a,t){console.log("getMightLikeProducsFromApi failed!"),console.log("Request: ",e),console.log("Status: ",a),console.log("Error: ",t)}})},commonLoader:function(a){switch(a){case"show":e(".wrapper-loader").hide().remove(),e("<div></div>").appendTo("body").addClass("wrapper-loader");var t=e(".wrapper-loader");e(".common-loader").hide().remove(),e("<div></div>").appendTo("body").addClass("common-loader");var o=e(".common-loader");return t.show(),o.show();case"hide":return(t=e(".wrapper-loader")).hide().remove(),(o=e(".common-loader")).hide().remove()}},generateProductCards:function(a){if(0==a.length)return!1;e(".block.related ul").html(""),e.each(a,function(a,t){var o=t.PATTERN_NAME,s=decodeURI(t.ITEMFULLIMAGE),r=(s=s.replace("$Full_Images$",""))+"$300BY400$&FIT=CROP",i=s+"?FIT=CROP&wid=10&hei=16",l=t.SKU.replace(" ","+"),d=t.PRODUCT_URL+"?c="+l,n=t.ITEMTHUMBNAIL,c=e("<li/>",{class:"item product product-item"}).attr({"data-name":o,"data-season":t.SEASON_SORT}),p=e("<div/>",{class:"product"}).appendTo(c),m=e("<a/>",{class:"margin-right",href:d,"data-image":r,"data-tiny-image":i}).appendTo(p),u=e("<span/>",{class:"product-image-container"}).css({width:"100%"}).appendTo(m),_=e("<span/>",{class:"product-image-wrapper"}).css({"padding-bottom":"128%"}).appendTo(u);e("<img/>",{class:"product-image-photo",src:n,alt:o}).attr({"data-pin-nopin":!0,"data-pin-description":o,"data-pin-no-hover":!0}).appendTo(_);var v=e("<div/>",{class:"product_description product details product-item-details"}).appendTo(p);e("<p/>").html(o).appendTo(v),e("<span/>").html(t.DISPLAY_SKU).appendTo(v);var h=e("<div/>",{class:"description-left-part"}).appendTo(v);e("<span/>").html(t.ITEMCATEGORY).appendTo(h);var y=parseFloat(t.NETPRICE);if(e("body").hasClass("customer-logged-in")){var f=e("<div/>").addClass("description-right-part").appendTo(v),w=e("<p/>").appendTo(f);e("<span/>").html(y.formatPrice(0)+" / "+t.UNITOFMEASURE).appendTo(w)}c.appendTo(".block.related ul")})},formatUsCorrency:function(e){Number.prototype.formatPrice=function(e,a){var t="\\d(?=(\\d{"+(a||3)+"})+"+(e>0?"\\.":"$")+")";return"$"+this.toFixed(Math.max(0,~~e)).replace(new RegExp(t,"g"),"$&,")}}};i.init(r)}});