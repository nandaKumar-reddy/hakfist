<div>
    <h2>Team Members</h2>

    <?php $teamMembers = $block->getData('team_members'); ?>
    
    <?php if (!empty($teamMembers)): ?>
        <table class="team-members-grid" style="width:100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th style="border: 1px solid #ddd; padding: 8px;">S.No</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">Email</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">First Name</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">Last Name</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">Team Number</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">Team Designation</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">Action</th>
                </tr>
            </thead>
            <tbody>
                <?php $serialNumber = 1; ?>
                <?php foreach ($teamMembers as $member): ?>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;"><?= $serialNumber++; ?></td>
                        <td style="border: 1px solid #ddd; padding: 8px;"><?= $member['email']; ?></td>
                        <td style="border: 1px solid #ddd; padding: 8px;"><?= $member['firstname']; ?></td>
                        <td style="border: 1px solid #ddd; padding: 8px;"><?= $member['lastname']; ?></td>
                        <td style="border: 1px solid #ddd; padding: 8px;"><?= $member['team_number']; ?></td>
                        <td style="border: 1px solid #ddd; padding: 8px;"><?= $member['team_designation']; ?></td>
                        <td style="border: 1px solid #ddd; padding: 8px;">
                            <form method="post" action="<?= $block->getUrl('hakfist/account/deletemember') ?>" onsubmit="return confirmDelete(this);">
                                <input type="hidden" name="customer_id" value="<?= $member['customer_id']; ?>" />
                                <button type="submit" style="background-color: red; color: white; border: none; padding: 5px 10px; cursor: pointer;">Delete</button>
                            </form>
                        </td>
                    </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
    <?php else: ?>
        <p>No team members found.</p>
    <?php endif; ?>
</div>

<script type="text/javascript">
function confirmDelete(form) {
    if (confirm('Are you sure you want to delete this team member?')) {
        return true; // Submit the form
    } else {
        return false; // Cancel the form submission
    }
}
</script>
